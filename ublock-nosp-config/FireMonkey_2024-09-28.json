{
  "autoUpdateInterval": 0,
  "autoUpdateLast": 0,
  "cmOptions": "",
  "counter": true,
  "customOptionsCSS": "",
  "customPopupCSS": "",
  "globalScriptExcludeMatches": "",
  "sync": false,
  "template": {
    "css": "",
    "js": ""
  },
  "_Caixa Inútil do Facebook": {
    "name": "Caixa Inútil do Facebook",
    "author": "Jhon Pérgon",
    "description": "Remove o popup que diz que você deve fazer login ou se cadastrar no facebook.",
    "version": "1.2",
    "updateURL": "https://update.greasyfork.org/scripts/480649/Caixa%20In%C3%BAtil%20do%20Facebook.user.js",
    "metaURL": "https://update.greasyfork.org/scripts/480649/Caixa%20In%C3%BAtil%20do%20Facebook.meta.js",
    "preprocessor": "",
    "injectInto": "",
    "runAt": "document_start",
    "allFrames": false,
    "matchAboutBlank": false,
    "antifeatures": [],
    "container": [],
    "excludes": [],
    "includes": [],
    "require": [],
    "resource": {},
    "matches": [
      "https://www.facebook.com/*",
      "https://facebook.com/*",
      "https://m.facebook.com/*",
      "https://facebookwkhpilnemxj7asaniu7vnjjbiltxjqhye3mhbshg7kx5tfyd.onion/*",
      "http://facebookwkhpilnemxj7asaniu7vnjjbiltxjqhye3mhbshg7kx5tfyd.onion/*"
    ],
    "excludeMatches": [],
    "includeGlobs": [],
    "excludeGlobs": [],
    "grant": [
      "none"
    ],
    "i18n": {
      "name": {
        "pt": "Caixa Inútil do Facebook",
        "pt-BR": "Caixa Inútil do Facebook",
        "pt-PT": "Caixa Inútil do Facebook",
        "es": "Caja Inútil de Facebook",
        "en": "Facebook Useless Box",
        "fr": "Boîte Inutile Facebook",
        "ru": "Бесполезная коробка Facebook",
        "ja": "フェイスブックの無駄なボックス",
        "ko": "페이스북 쓸모없는 박스",
        "zh-TW": "Facebook 無用盒",
        "zh-CN": "Facebook 无用盒",
        "id": "Kotak Tidak Berguna Facebook",
        "ug": "Facebook Heqiqi Quti",
        "ar": "صندوق فيسبوك الغير مفيد",
        "he": "קופסת פייסבוק לא שימושית",
        "hi": "फेसबुक यूज़लेस बॉक्स",
        "th": "กล่องไร้ประโยชน์ของ Facebook",
        "bg": "Фейсбук Безполезна Кутия",
        "ro": "Cutie Inutilă Facebook",
        "fi": "Facebookin Hyödytön Laatikko",
        "it": "Scatola Inutile di Facebook",
        "el": "Αντίστοιχο Κουτί Μηχανισμού του Facebook",
        "eo": "Senutila Skatolo de Facebook",
        "hu": "Facebook Haszontalan Doboz",
        "nb": "Facebook Nytteløs Boks",
        "sk": "Facebook Bezobsahová Schránka",
        "sv": "Facebook Onödig Låda",
        "sr": "Фејсбук Бескорисна Кутија",
        "pl": "Bezsensowne Pudełko Facebooka",
        "nl": "Nutteloze Doos van Facebook",
        "de": "Facebook Nutzlose Box",
        "da": "Facebook Brugløs Boks",
        "cs": "Facebook Zbytečná Krabice",
        "uk": "Непотрібна скринька Facebook",
        "tr": "Facebook Gereksiz Kutu",
        "vi": "Hộp Vô Dụng của Facebook",
        "fr-CA": "Boîte Inutile de Facebook"
      },
      "description": {
        "pt": "Remove o popup que diz que você deve fazer login ou se cadastrar no facebook.",
        "pt-BR": "Remove o popup que diz que você deve fazer login ou se cadastrar no facebook.",
        "pt-PT": "Remove o popup que diz que você deve fazer login ou se cadastrar no facebook.",
        "en": "Remove the box that says you must register or log in to view this page on Facebook.",
        "es": "Elimina la caja que dice que debes registrarte o iniciar sesión para ver esta página en Facebook.",
        "fr": "Supprimez la boîte qui indique que vous devez vous inscrire ou vous connecter pour voir cette page sur Facebook.",
        "ru": "Уберите окно, которое говорит, что для просмотра этой страницы на Facebook необходимо зарегистрироваться или войти в систему.",
        "ja": "Facebookでこのページを表示するには登録またはログインする必要があると表示されているボックスを取り除きます。",
        "ko": "Facebook에서 이 페이지를 보려면 등록하거나 로그인해야한다는 상자를 제거합니다.",
        "zh-TW": "移除顯示在 Facebook 上查看此頁面必須註冊或登錄的框。",
        "zh-CN": "删除在 Facebook 上查看此页面必须注册或登录的框。",
        "id": "Hapus kotak yang menyatakan Anda harus mendaftar atau masuk untuk melihat halaman ini di Facebook.",
        "ug": "Facebookdiki bu sahifini ko'rish uchun ro'yxatdan o'tish yoki kirish kiritishni aytadigan qutini olib tashlang.",
        "ar": "قم بإزالة الصندوق الذي يقول إنه يجب عليك التسجيل أو تسجيل الدخول لعرض هذه الصفحة على فيسبوك.",
        "he": "הסר את התיק בו כתוב שעליך להירשם או להתחבר כדי לראות דף זה בפייסבוק.",
        "hi": "उस बॉक्स को हटाएं जिसमें कहा गया है कि आपको इस पृष्ठ को देखने के लिए पंजीकरण करना या लॉगिन करना होगा।",
        "th": "ลบกล่องที่ระบุว่าคุณต้องลงทะเบียนหรือเข้าสู่ระบบเพื่อดูหน้านี้ใน Facebook ออก",
        "bg": "Премахнете кутията, която казва, че трябва да се регистрирате или влезете, за да видите тази страница във Facebook.",
        "ro": "Eliminați cutia care spune că trebuie să vă înregistrați sau să vă autentificați pentru a vizualiza această pagină pe Facebook.",
        "fi": "Poista laatikko, joka sanoo, että sinun on rekisteröidyttävä tai kirjauduttava sisään nähdäksesi tämän sivun Facebookissa.",
        "it": "Rimuovi la casella che dice che devi registrarti o accedere per visualizzare questa pagina su Facebook.",
        "el": "Αφαιρέστε το κουτί που λέει πρέπει να εγγραφείτε ή να συνδεθείτε για να δείτε αυτή τη σελίδα στο Facebook.",
        "eo": "Forigilo la skatolon kiu diras ke vi devas registriĝi aŭ ensaluti por vidi tiun paĝon sur Facebook.",
        "hu": "Távolítsa el azt a dobozt, amely azt mondja, hogy regisztrálnia vagy bejelentkeznie kell a Facebookon történő oldalnézéshez.",
        "nb": "Fjern boksen som sier at du må registrere deg eller logge inn for å se denne siden på Facebook.",
        "sk": "Odstráňte box, ktorý hovorí, že sa musíte prihlásiť alebo zaregistrovať, aby ste videli túto stránku na Facebooku.",
        "sv": "Ta bort rutan som säger att du måste registrera dig eller logga in för att se den här sidan på Facebook.",
        "sr": "Уклоните кутију која каже да се морате регистровати или пријавити да бисте видели ову страницу на Фејсбуку.",
        "pl": "Usuń pole, które mówi, że musisz się zarejestrować lub zalogować, aby zobaczyć tę stronę na Facebooku.",
        "nl": "Verwijder de box die zegt dat je je moet registreren of inloggen om deze pagina op Facebook te bekijken.",
        "de": "Entfernen Sie die Box, die besagt, dass Sie sich registrieren oder anmelden müssen, um diese Seite auf Facebook zu sehen.",
        "da": "Fjern boksen, der siger, at du skal registrere dig eller logge ind for at se denne side på Facebook.",
        "cs": "Odeberte pole, které říká, že se musíte zaregistrovat nebo přihlásit, abyste mohli zobrazit tuto stránku na Facebooku.",
        "uk": "Видаліть коробку, яка каже, що для перегляду цієї сторінки на Facebook потрібно зареєструватися або увійти.",
        "tr": "Facebook'ta bu sayfayı görmek için kaydolmanız veya giriş yapmanız gerektiğini söyleyen kutuyu kaldırın.",
        "vi": "Loại bỏ hộp thông báo bạn phải đăng ký hoặc đăng nhập để xem trang này trên Facebook.",
        "fr-CA": "Supprimez la boîte qui indique que vous devez vous inscrire ou vous connecter pour voir cette page sur Facebook."
      }
    },
    "storage": {},
    "userMeta": "",
    "userVar": {},
    "autoUpdate": false,
    "enabled": true,
    "error": "",
    "requireRemote": [],
    "style": [],
    "js": "// ==UserScript==\n// @name         Caixa Inútil do Facebook\n// @description  Remove o popup que diz que você deve fazer login ou se cadastrar no facebook.\n// @namespace    http://linkme.bio/jhonpergon/?userscript=bannerfb\n// @version      1.2\n// @author       Jhon Pérgon\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACTUlEQVRYR2NkGGDAOMD2M5DvgPqjxxn+/bMAe4CJ6QRDo7UlOZ4h3QFNZ3QZfn+/hNUyVk49hjqTy6Q4hDQH1B7+T5ThzbZEm0ucwtoj/xgY/hOnFu5Cxv8MzTZMhByM39CG4/MY/v5JJGQIXnlmlvkMDZZJuNRgd0DDMSGGv3/fUmQxumZmZmGGBqt36MKYDiA2noEmWUtzM6yO0kYxU655L8MfDl7cbkdLH+Q74P9/hmdl5hgW0c0B17MNGPi52OAOqF9xkOHj958Max4zMfzj5KN9CDwrNYNbIlOzmeEfvzhxSYZaUYDsAKnWAwwMbFwjwQF/fjE8q7TB61OpzuPAuoGZRmmAGAd0n8IfFRSlgQF3AJLfRmgiHA0BeoQAo2PJ//82/gRLNXISIeORjQz/9/egVIAYtSGjS+V/BmBN919CnoFBSQenQ0hywL0rDIwvHjIwMDIy/N/Tjt8BYBvdG4QY//96C3aIFTA0/v3GdMj9s8BWGrClBgIyQIeycWKqYWJlYDy2EWIxI5sww84GIhokSMYweTXMA7YEExn+/WH4b+JOMFqQFTCe2QksklkYgC3D+f+2NZDYJEOziimwHdwo/f/vL8N/PQe8DmG8dICBEVwXAJWvr6SwUYrukMh+YLP8P8M/STUGBm5+VNmvHxmYnt8CWczwb3kh0S1oohXCbUuYqcvE+O8SKP7/KUEaJUz3gBUQI7Al9Pe/PsOiLOydFhzhRroDoAYxZi44DtQM7poBg+XE/+kJdOqakZQUCSsmOwQIG02cCgCcNOQhNTVMDwAAAABJRU5ErkJggg==\n\n// @name:pt         Caixa Inútil do Facebook\n// @name:pt-BR      Caixa Inútil do Facebook\n// @name:pt-PT      Caixa Inútil do Facebook\n// @name:es         Caja Inútil de Facebook\n// @name:en         Facebook Useless Box\n// @name:fr         Boîte Inutile Facebook\n// @name:ru         Бесполезная коробка Facebook\n// @name:ja         フェイスブックの無駄なボックス\n// @name:ko         페이스북 쓸모없는 박스\n// @name:zh-TW      Facebook 無用盒\n// @name:zh-CN      Facebook 无用盒\n// @name:id         Kotak Tidak Berguna Facebook\n// @name:ug         Facebook Heqiqi Quti\n// @name:ar         صندوق فيسبوك الغير مفيد\n// @name:he         קופסת פייסבוק לא שימושית\n// @name:hi         फेसबुक यूज़लेस बॉक्स\n// @name:th         กล่องไร้ประโยชน์ของ Facebook\n// @name:bg         Фейсбук Безполезна Кутия\n// @name:ro         Cutie Inutilă Facebook\n// @name:fi         Facebookin Hyödytön Laatikko\n// @name:it         Scatola Inutile di Facebook\n// @name:el         Αντίστοιχο Κουτί Μηχανισμού του Facebook\n// @name:eo         Senutila Skatolo de Facebook\n// @name:hu         Facebook Haszontalan Doboz\n// @name:nb         Facebook Nytteløs Boks\n// @name:sk         Facebook Bezobsahová Schránka\n// @name:sv         Facebook Onödig Låda\n// @name:sr         Фејсбук Бескорисна Кутија\n// @name:pl         Bezsensowne Pudełko Facebooka\n// @name:nl         Nutteloze Doos van Facebook\n// @name:de         Facebook Nutzlose Box\n// @name:da         Facebook Brugløs Boks\n// @name:cs         Facebook Zbytečná Krabice\n// @name:uk         Непотрібна скринька Facebook\n// @name:tr         Facebook Gereksiz Kutu\n// @name:vi         Hộp Vô Dụng của Facebook\n// @name:fr-CA      Boîte Inutile de Facebook\n\n// @description:pt       Remove o popup que diz que você deve fazer login ou se cadastrar no facebook.\n// @description:pt-BR    Remove o popup que diz que você deve fazer login ou se cadastrar no facebook.\n// @description:pt-PT    Remove o popup que diz que você deve fazer login ou se cadastrar no facebook.\n// @description:en       Remove the box that says you must register or log in to view this page on Facebook.\n// @description:es       Elimina la caja que dice que debes registrarte o iniciar sesión para ver esta página en Facebook.\n// @description:fr       Supprimez la boîte qui indique que vous devez vous inscrire ou vous connecter pour voir cette page sur Facebook.\n// @description:ru       Уберите окно, которое говорит, что для просмотра этой страницы на Facebook необходимо зарегистрироваться или войти в систему.\n// @description:ja       Facebookでこのページを表示するには登録またはログインする必要があると表示されているボックスを取り除きます。\n// @description:ko       Facebook에서 이 페이지를 보려면 등록하거나 로그인해야한다는 상자를 제거합니다.\n// @description:zh-TW    移除顯示在 Facebook 上查看此頁面必須註冊或登錄的框。\n// @description:zh-CN    删除在 Facebook 上查看此页面必须注册或登录的框。\n// @description:id       Hapus kotak yang menyatakan Anda harus mendaftar atau masuk untuk melihat halaman ini di Facebook.\n// @description:ug       Facebookdiki bu sahifini ko'rish uchun ro'yxatdan o'tish yoki kirish kiritishni aytadigan qutini olib tashlang.\n// @description:ar       قم بإزالة الصندوق الذي يقول إنه يجب عليك التسجيل أو تسجيل الدخول لعرض هذه الصفحة على فيسبوك.\n// @description:he       הסר את התיק בו כתוב שעליך להירשם או להתחבר כדי לראות דף זה בפייסבוק.\n// @description:hi       उस बॉक्स को हटाएं जिसमें कहा गया है कि आपको इस पृष्ठ को देखने के लिए पंजीकरण करना या लॉगिन करना होगा।\n// @description:th       ลบกล่องที่ระบุว่าคุณต้องลงทะเบียนหรือเข้าสู่ระบบเพื่อดูหน้านี้ใน Facebook ออก\n// @description:bg       Премахнете кутията, която казва, че трябва да се регистрирате или влезете, за да видите тази страница във Facebook.\n// @description:ro       Eliminați cutia care spune că trebuie să vă înregistrați sau să vă autentificați pentru a vizualiza această pagină pe Facebook.\n// @description:fi       Poista laatikko, joka sanoo, että sinun on rekisteröidyttävä tai kirjauduttava sisään nähdäksesi tämän sivun Facebookissa.\n// @description:it       Rimuovi la casella che dice che devi registrarti o accedere per visualizzare questa pagina su Facebook.\n// @description:el       Αφαιρέστε το κουτί που λέει πρέπει να εγγραφείτε ή να συνδεθείτε για να δείτε αυτή τη σελίδα στο Facebook.\n// @description:eo       Forigilo la skatolon kiu diras ke vi devas registriĝi aŭ ensaluti por vidi tiun paĝon sur Facebook.\n// @description:hu       Távolítsa el azt a dobozt, amely azt mondja, hogy regisztrálnia vagy bejelentkeznie kell a Facebookon történő oldalnézéshez.\n// @description:nb       Fjern boksen som sier at du må registrere deg eller logge inn for å se denne siden på Facebook.\n// @description:sk       Odstráňte box, ktorý hovorí, že sa musíte prihlásiť alebo zaregistrovať, aby ste videli túto stránku na Facebooku.\n// @description:sv       Ta bort rutan som säger att du måste registrera dig eller logga in för att se den här sidan på Facebook.\n// @description:sr       Уклоните кутију која каже да се морате регистровати или пријавити да бисте видели ову страницу на Фејсбуку.\n// @description:pl       Usuń pole, które mówi, że musisz się zarejestrować lub zalogować, aby zobaczyć tę stronę na Facebooku.\n// @description:nl       Verwijder de box die zegt dat je je moet registreren of inloggen om deze pagina op Facebook te bekijken.\n// @description:de       Entfernen Sie die Box, die besagt, dass Sie sich registrieren oder anmelden müssen, um diese Seite auf Facebook zu sehen.\n// @description:da       Fjern boksen, der siger, at du skal registrere dig eller logge ind for at se denne side på Facebook.\n// @description:cs       Odeberte pole, které říká, že se musíte zaregistrovat nebo přihlásit, abyste mohli zobrazit tuto stránku na Facebooku.\n// @description:uk       Видаліть коробку, яка каже, що для перегляду цієї сторінки на Facebook потрібно зареєструватися або увійти.\n// @description:tr       Facebook'ta bu sayfayı görmek için kaydolmanız veya giriş yapmanız gerektiğini söyleyen kutuyu kaldırın.\n// @description:vi       Loại bỏ hộp thông báo bạn phải đăng ký hoặc đăng nhập để xem trang này trên Facebook.\n// @description:fr-CA    Supprimez la boîte qui indique que vous devez vous inscrire ou vous connecter pour voir cette page sur Facebook.\n\n// @match        https://www.facebook.com/*\n// @match        https://facebook.com/*\n// @match        https://m.facebook.com/*\n// @match        https://facebookwkhpilnemxj7asaniu7vnjjbiltxjqhye3mhbshg7kx5tfyd.onion/*\n// @match        http://facebookwkhpilnemxj7asaniu7vnjjbiltxjqhye3mhbshg7kx5tfyd.onion/*\n\n// @license      MIT\n// @grant        none\n// @run-at       document-start\n\n// @compatible      chrome\n// @compatible      firefox\n// @compatible      opera\n// @compatible      edge\n// @compatible      safari\n// @compatible      berrybrowser\n// @downloadURL https://update.greasyfork.org/scripts/480649/Caixa%20In%C3%BAtil%20do%20Facebook.user.js\n// @updateURL https://update.greasyfork.org/scripts/480649/Caixa%20In%C3%BAtil%20do%20Facebook.meta.js\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    function removeFx(){\n      let checarMargin = document.querySelectorAll('div');\n        if(checarMargin){\n          checarMargin.forEach(function (elementoD) {\n            // Tira a margem de outra coisa para aumentar o espaço em tela\n            if(elementoD.style.top == \"56px\"){\n              elementoD.style.top = '-5px';\n              elementoD.style.marginTop = '-5px';\n            }\n          });\n      }\n    }\n\n    // Caso o carregamento seja lento\n    window.setTimeout(removeFx, 250);\n    window.setTimeout(removeFx, 550);\n    window.setTimeout(removeFx, 1050);\n    window.setTimeout(removeFx, 1550);\n    window.setTimeout(removeFx, 2500);\n\n  function removeBoxdown(){\n     let checarDivs = document.querySelectorAll('div[data-nosnippet]');\n        if(checarDivs){\n          checarDivs.forEach(function (elementoN) {\n            elementoN.style.display = 'none';\n          });\n      }\n    let checarExist = document.querySelector('#pagelet_growth_expanding_cta');\n    if(checarExist){\n        checarExist.style.display = 'none';\n    }\n  }\n\n   const checkBanner = setInterval(() => {\n        removeBoxdown()\n    }, 500);\n\n  setTimeout(() => {\n      clearInterval(checkBanner);\n  }, 12000);\n\n})();\n",
    "css": ""
  },
  "_Login reminder popup remover (developement ceased - not up to date)": {
    "name": "Login reminder popup remover (developement ceased - not up to date)",
    "author": "",
    "description": "Removes the nagging login popups and banners from mobile and desktop versions of Facebook, Instagram, Reddit, Twitter, Quora, Ask.fm, VK, Pinterest, Tumblr, Twitch and from the mobile versions of Youtube and TikTok.",
    "version": "2.7.20",
    "updateURL": "https://update.greasyfork.org/scripts/395497/Login%20reminder%20popup%20remover%20%28developement%20ceased%20-%20not%20up%20to%20date%29.user.js",
    "metaURL": "https://update.greasyfork.org/scripts/395497/Login%20reminder%20popup%20remover%20%28developement%20ceased%20-%20not%20up%20to%20date%29.meta.js",
    "preprocessor": "",
    "injectInto": "",
    "runAt": "document_idle",
    "allFrames": false,
    "matchAboutBlank": false,
    "antifeatures": [],
    "container": [],
    "excludes": [],
    "includes": [],
    "require": [],
    "resource": {},
    "matches": [],
    "excludeMatches": [
      "https://developers.facebook.com/*",
      "https://www.instagram.com/privacy/checks/*",
      "https://twitter.com/intent/tweet?*",
      "https://mobile.twitter.com/intent/tweet?*",
      "https://x.com/intent/tweet?*",
      "https://mobile.x.com/intent/tweet?*",
      "https://vk.com/im?*"
    ],
    "includeGlobs": [
      "https://www.pinterest.*/*",
      "https://*.facebook.com/*",
      "https://www.instagram.com/*",
      "https://m.youtube.com/*",
      "https://www.youtube.com/*",
      "https://www.reddit.com/*",
      "https://twitter.com/*",
      "https://mobile.twitter.com/*",
      "https://x.com/*",
      "https://mobile.x.com/*",
      "https://*.quora.com/*",
      "https://ask.fm/*",
      "https://vk.com/*",
      "https://m.vk.com/*",
      "https://*.tumblr.com/*",
      "https://www.twitch.tv/*",
      "https://www.tiktok.com/*/video/*"
    ],
    "excludeGlobs": [],
    "grant": [
      "GM.getValue",
      "GM.setValue",
      "GM.registerMenuCommand",
      "GM.unsafeWindow"
    ],
    "i18n": {
      "name": {
        "it": "Rimuovi i popup di richiesta d'accesso (non aggiornato - sviluppo terminato)"
      },
      "description": {
        "it": "Rimuovi i fastidiosi banner e popup di richiesta d'accesso dalle versioni mobile e desktop di Facebook, Instagram, Reddit, Twitter, Quora, Ask.fm, VK, Pinterest, Tumblr, Twitch e dalla versione mobile di Youtube e TikTok."
      }
    },
    "storage": {},
    "userMeta": "",
    "userVar": {},
    "autoUpdate": false,
    "enabled": false,
    "error": "",
    "requireRemote": [],
    "style": [],
    "js": "// ==UserScript==\n// @name        Login reminder popup remover (developement ceased - not up to date)\n// @name:it  Rimuovi i popup di richiesta d'accesso (non aggiornato - sviluppo terminato)\n// @namespace   StephenP\n// @description Removes the nagging login popups and banners from mobile and desktop versions of Facebook, Instagram, Reddit, Twitter, Quora, Ask.fm, VK, Pinterest, Tumblr, Twitch and from the mobile versions of Youtube and TikTok.\n// @description:it Rimuovi i fastidiosi banner e popup di richiesta d'accesso dalle versioni mobile e desktop di Facebook, Instagram, Reddit, Twitter, Quora, Ask.fm, VK, Pinterest, Tumblr, Twitch e dalla versione mobile di Youtube e TikTok.\n// @match     https://*.facebook.com/*\n// @exclude   https://developers.facebook.com/*\n// @exclude   https://www.instagram.com/privacy/checks/*\n// @exclude   https://twitter.com/intent/tweet?*\n// @exclude   https://mobile.twitter.com/intent/tweet?*\n// @exclude   https://x.com/intent/tweet?*\n// @exclude   https://mobile.x.com/intent/tweet?*\n// @exclude   https://vk.com/im?*\n// @match     https://www.instagram.com/*\n// @match     https://m.youtube.com/*\n// @match     https://www.youtube.com/*\n// @match     https://www.reddit.com/*\n// @match     https://twitter.com/*\n// @match     https://mobile.twitter.com/*\n// @match     https://x.com/*\n// @match     https://mobile.x.com/*\n// @match     https://*.quora.com/*\n// @match     https://ask.fm/*\n// @match     https://vk.com/*\n// @match     https://m.vk.com/*\n// @match     https://*.tumblr.com/*\n// @match     https://www.twitch.tv/*\n// @match     https://www.tiktok.com/*/video/*\n// @include   https://www.pinterest.tld/*\n// @version   2.7.20\n// @grant     GM.getValue\n// @grant     GM.setValue\n// @grant     GM.registerMenuCommand\n// @grant     GM.unsafeWindow\n// @license   CC-BY-NC-SA-4.0\n// @icon      data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAG1BMVEXTrvFOWZTEN4aXQ6vcRGPsbUH2sVjlt7/////5Q3C9AAAAAXRSTlMAQObYZgAAANJJREFUKM+9z7EKwjAQgOFIqbPFpXMUmlHMoKsQsKtgsC9g3WMkWS2V3GN7SZrQwdl/68fdlRBCFtWac74jqYLHsvBUHjiA75lGCm6dMca6BPzg9hSzajPBcQjfbKAJFLXgTJOBqQYMqAx7pnCaDRko060W5xGhwlZk20Y4R6iIaHU3inYG3euGR3UG2b0k/lYg1AABPhLDTQoRbs7D1SYoJcTHCQZvf6PsH+H5GiEcJb0Pd0Q9wdLDXV5PdVyZRF7CYgDMz/6E9xyqdPR/sMiw+gKZRGTvTIJM4gAAAABJRU5ErkJggg==\n// @downloadURL https://update.greasyfork.org/scripts/395497/Login%20reminder%20popup%20remover%20%28developement%20ceased%20-%20not%20up%20to%20date%29.user.js\n// @updateURL https://update.greasyfork.org/scripts/395497/Login%20reminder%20popup%20remover%20%28developement%20ceased%20-%20not%20up%20to%20date%29.meta.js\n// ==/UserScript==\n\n//A ROUGH SCHEME OF HOW ALL THIS CODE WORKS:\n//First, it checks the configuration (language of the browser and sites where the user disabled the execution of this script).\n//Then, if it has just been loaded, the script proceeds to add specific CSS code for the site, and then some specific JS code if needed for elements that are hard to select using CSS rules.\n//Otherwise it constantly checks if the page has changed (happens when pages are not loaded normally, but an AJAX request is used to fetch the new content of the page), and if it has changed, applies again the necessary CSS and JS code to remove the popups.\n\n//Various intervals used by the timers in the funcions (mainly to check the page until the needed items appeare, without relying on the cumbersome mutation observers)\nvar interval_0;\nvar interval_1;\nvar interval_2;\nvar interval_3;\nvar interval_4;\nvar mutationObserver_0;\nvar url;\n//list of disabled sites (synced with the \"disabledSites\" list saved with GM.setValue())\nvar disabledSites=[];\nvar l;\n//localizations in JSON format\nconst jsonLocalization=JSON.parse(`\n{\n    \"en\": {\n        \"disableFor\": \"Disable for \",\n        \"enableFor\": \"Enable again for \",\n\t\t\"disabledSites\": \"Disabled sites: \",\n\t\t\"isDisabled\": \" is currently disabled.\",\n\t\t\"isNotDisabled\": \" isn't currently disabled.\",\n        \"igBanNote\": \"If the page doesn't load anymore, your IP may have been temporarily limited from anonymous Instagram browsing. If you still need to view the page, you can try using one of the external services listed below:\"\n\t},\n    \"it\": {\n        \"disableFor\": \"Disabilita per \",\n        \"enableFor\": \"Abilita nuovamente per \",\n\t\t\"disabledSites\": \"Siti disabilitati: \",\n\t\t\"isDisabled\": \" è attualmente disabilitato.\",\n\t\t\"isNotDisabled\": \" non è attualmente disabilitato.\",\n        \"igBanNote\": \"Se la pagina non carica oltre, il tuo indirizzo IP potrebbe essere stato temporaneamente limitato dalla navigazione anonima su Instagram. Se hai comunque bisogno di vedere la pagina, puoi provare usando uno dei servizi esterni elencati qui sotto:\"\n    }\n}\n`);\n\n//Program start: checks and sets the language, looks for which sites the execution has been disabled and launches the function to add the specific css and js for each site.\n(async function(){\n  let lang=getLang();\n  if(lang.startsWith(\"it\")){\n    l=jsonLocalization.it;\n  }\n  else{\n    l=jsonLocalization.en;\n  }\n  disabledSites=await getDisabledSites();\n  if(!disabledSites.includes(document.location.hostname)){\n    GM.registerMenuCommand(l.disableFor+document.location.hostname, changeForThisSite, \"D\");\n    applyUserCss();\n    setInterval(checkPageChanged,1000);\n  }\n  else{\n    GM.registerMenuCommand(l.enableFor+document.location.hostname, changeForThisSite, \"E\");\n  }\n})();\nfunction getLang() {\n  try{\n    if (navigator.languages != undefined)\n      return navigator.languages[0];\n    return navigator.language;\n  }\n  catch(e){\n    return \"en\"\n  }\n}\nasync function getDisabledSites(){\n  var dS=await GM.getValue(\"disabledSites\");\n  console.log(l.disabledSites+dS);\n  if(dS){\n\t\treturn dS.split(',');\n  }\n  else{\n    return [];\n  }\n}\n//this function switches the setting of a site from enabled to disabled and viceversa\nfunction changeForThisSite(){\n  let tS=document.location.hostname;\n  if(disabledSites.includes(tS)){\n    console.log(tS+l.isDisabled);\n    var filtered = disabledSites.filter(function(value){\n      return value !== document.location.hostname;\n    });\n    console.log(filtered);\n    disabledSites=filtered;\n    GM.setValue(\"disabledSites\",filtered.join(\",\"));\n    document.location.reload();\n  }\n  else if(!disabledSites.includes(tS)){\n    console.log(tS+l.isNotDisabled);\n    disabledSites.push(tS);\n    GM.setValue(\"disabledSites\",disabledSites.join(\",\"));\n    document.location.reload();\n  }\n}\n//when a page is loaded through an AJAX request, the script is not automatically reloaded. As tracking the AJAX requests is a pointless effort, this function just compares if the url of the page changed since the last check (once per second, can be changed in the main function)\nfunction checkPageChanged(){\n if(document.location!=url){\n   console.log(\"Changed url from \"+url+\" to \"+document.location.toString());\n \tinterval_4=setInterval(checkPageReady,500);\n  url=document.location.toString();\n }\n}\n//this function applies for every site a specific set of css rules to remove most of the annoyances.\n//some of them are very hard, if not impossible, to be defined with css rules, hence the checkPageReady() function that waits for the page to load and uses specific js functions to remove these annoyances through the means of js.\nfunction applyUserCss(){//this function adds the css styling for removing popups to the head of the document, as soon as possible when the page is loaded. Other popups that can't be removed just with css selectors are removed later with the check() function\n  let st=document.createElement(\"STYLE\");\n  st.id=\"LPRStyle\";\n  if(document.location.href.includes(\"instagram.com\")){\n    st.textContent=\".u7YqG{z-index: 1} .xUdfV{z-index: 2} ._3sb-{z-index: 3} .G_hoz.LcKDX, ._7zNgw.GLdVF{z-index: 2} .FFVAD{z-index: 1} .tWeCl{z-index: 1} .v5DqJ, .RnEpo.Yx5HN, .RnEpo._Yhr4, .xZ2Xk, .tHaIX, nav.kqZqN.e6AxN.JIFNi, .mray0b6k, ._aa9j, ._ab8q._ab8w, .h4m39qi9, [class=x1uhb9sk]{display: none !important} body{overflow-y: scroll !important} .CzVzU>div{z-index: 4} #scrollview{scrollbar-width: unset} html{scrollbar-width: none}\";\n  }\n  else if(document.location.href.includes(\"twitter.com\")||document.location.href.includes(\"//x.com\")||document.location.href.includes(\".x.com\")){\n    //IF EDITING THIS LIST OF POPUPS, KEEP IT IN SYNC WITH THE POPUPS LISTED blockBannerTw\n    st.textContent=\"#layers>.css-1dbjc4n.r-aqfbo4.r-1p0dtai.r-1d2f490.r-12vffkv.r-1xcajam.r-zchlnj>.css-1dbjc4n.r-12vffkv>.css-1dbjc4n.r-12vffkv>.css-1dbjc4n.r-l5o3uw, .css-1dbjc4n.r-1awozwy.r-14lw9ot.r-1dgieki.r-1efd50x.r-5kkj8d.r-18u37iz.r-16y2uox.r-1a1dyw.r-1swwhx3.r-1j3t67a.r-1qxgc49, .css-1dbjc4n.r-1awozwy.r-1kihuf0.r-18u37iz.r-1pi2tsx.r-1777fci.r-1pjcn9w.r-1xcajam.r-ipm5af.r-g6jmlv, .css-1dbjc4n.r-aqfbo4.r-1d2f490.r-12vffkv.r-1xcajam.r-zchlnj.r-ipm5af, .css-1dbjc4n.r-aqfbo4.r-1p0dtai.r-1d2f490{display: none !important}\";\n  }\n  else if(document.location.href.includes(\"reddit.com\")){\n    st.textContent=\"* {filter: none !important} .XPromoNSFWBlocking__warning, .XPromoNSFWBlockingModal, .xPromoChoiceBanner, .XPromoPill, .XPromoPopup, .GetAppFooter, .XPromoInFeed, .XPromoBlockingModal, .PreviewDrawer, [data-testid=bottom-cell-wrapper], shreddit-experience-tree, shreddit-comments-page-ad, xpromo-untagged-content-blocking-modal, xpromo-nsfw-blocking-modal, xpromo-new-nsfw-blocking-modal, .XPromoBottomBar, [bundlename=bottom_bar_xpromo], [bundlename=desktop_rpl_nsfw_blocking_modal], .XPromoPopupRpl, .XPromoBlockingModalRpl, xpromo-nsfw-blocking-modal-desktop, body>div[style*='inset: 0'], [bundlename=app_selector], [paint-group=xpromo], inline-auth-landing-experience-xpromo-shell {display: none !important} .scroll-disabled {overflow-y: scroll !important; position: static !important} .NavFrame, body,.scroll-is-blocked {overflow-y: scroll !important} body{pointer-events: inherit !important} shreddit-app>div.fixed{position: inherit !important}\";\n  }\n  else if(document.location.href.includes(\"quora.com/\")){\n    st.textContent=\"*, #page_wrapper {filter: none !important} .new_signup_dialog, .qu-zIndex--blocking_wall{display: none !important} body, .q-platform--mobile{overflow-y: scroll !important; overflow-x: hidden !important;} .q-sticky{position: inherit !important}\";\n  }\n  else if(document.location.href.includes(\"https://ask.fm/\")){\n    st.textContent=\"body{overflow-y: scroll !important} .expired-countdown::after{display: none !important}\";\n  }\n  else if(document.location.href.includes(\"vk.com/\")){\n    st.textContent=\"body{overflow-y: scroll !important} .PageBottomBanner--unauth{display: none !important}\";\n  }\n  else if(document.location.href.includes(\"//m.youtube.com\")){\n  \tst.textContent=\".upsell-dialog-lightbox{display: none !important} [modal-open-body]{position: inherit !important}\";\n  }\n  else if(document.location.href.includes(\"//www.youtube.com\")){\n  \tst.textContent=\"ytd-guide-signin-promo-renderer{display: none !important}\";\n  }\n  else if(document.location.href.includes(\"facebook.com\")){\n    st.textContent=\".asf1osic.k4urcfbm.j9ispegn.poy2od1o.tw6a2znq.m7u2wfa4.d1544ag0.i3j981x3.rlt63pii.i09qtzwb.hybvsw6c, .tlfeazxf, [role=main]+[data-nosnippet], .xixxii4.xh8yej3.x1ey2m1c {display: none !important}\";\n    if((!document.location.href.includes(\"m.facebook.com\"))&&(!document.location.href.includes(\"iphone.facebook.com\"))&&(!document.location.href.includes(\"x.facebook.com\"))&&(!document.location.href.includes(\"touch.facebook.com\"))){\n      st.textContent+=\"#pagelet_growth_expanding_cta{display: none !important}\";\n    }\n    if(document.location.href.includes(\"/posts/\")){\n      st.textContent+=\"#headerArea{display: none !important}\";\n    }\n    else if(document.location.href.includes(\"touch.facebook.com\")){\n      st.textContent+=\"._4b-b{display: none !important}\";\n    }\n  }\n  else if(document.location.href.includes(\"quora.com\")){\n    st.textContent=\".signup_wall_wrapper>.BaseSignupForm._DialogSignupForm{display: none !important}\";\n  }\n  else if(document.location.href.includes(\"https://www.pinterest.\")){\n    st.textContent=\"[data-test-id=bottom-right-upsell], [data-test-id=giftWrap], [data-test-id=fullPageSignupModal], [data-test-id=floating-app-upsell], .FNs.XiG.zI7.iyn.Hsu{display: none !important} .article-row{-ms-overflow-style: auto !important;scrollbar-width: auto !important;} ::-webkit-scrollbar {display: block !important;} ::-webkit-scrollbar-thumb {background: grey;}\";\n  }\n  else if(document.location.href.includes(\"tumblr.com\")){\n    st.textContent=\"div.IvzMP{display:none} body{overflow-y: scroll !important}\";\n  }\n  else if(document.location.href.includes(\"twitch.tv\")){\n    st.textContent=\"#twilight-sticky-footer-root{display:none}\";\n  }\n  else if(document.location.href.includes(\"tiktok.com\")){\n    st.textContent=\"[class*=DivTopBannerAB][type=bottom], div.box-border>.z-2000, .matrix-smart-wrapper{display:none}\";\n  }\n  document.getElementsByTagName(\"HEAD\")[0].appendChild(st);\n  //some sites are evil and try to delete the css that this script adds. The following tries to restore it in the very moment it is removed.\n  const observer = new MutationObserver(function(mutations_list) {\n    mutations_list.forEach(function(mutation) {\n      mutation.removedNodes.forEach(function(removed_node) {\n        if(removed_node.id == 'LPRStyle') {\n          console.log('#child has been removed');\n          observer.disconnect();\n          applyUserCss();\n        }\n      });\n    });\n  });\n\n\tobserver.observe(document.getElementsByTagName(\"HEAD\")[0], { subtree: false, childList: true });\n\n\n}\n//checkPageReady() checks for specific elements of the page that appear when the page is ready enough to operate the functions on it. Once a page is ready, specific functions are executed to remove popups, banners, etc.\nfunction checkPageReady(){\n  if((document.getElementsByTagName(\"BUTTON\").length>0)||(document.getElementsByTagName(\"FORM\").length>0)||(document.getElementsByClassName(\"signup_login_buttons\").length>0)||(document.getElementsByTagName(\"shreddit-post\").length>0)||(document.getElementById(\"layers\")!==null)||(document.getElementById(\"mcont\")!==null)||(document.getElementsByTagName(\"VIDEO\").length>0)){//If buttons are there, the page should have loaded. At least that's what I see...\n    console.log(\"Page is ready\");\n    clearInterval(interval_4);\n    if(document.location.href.includes(\"facebook.com\")){\n      interval_0=setInterval(blockPopupFB,500);\n    }\n    else if((document.location.href.includes(\"instagram.com\"))&&(!document.location.href.includes(\"/accounts/login/?next=\"))){\n      clearInterval(interval_2);\n      //The following observer checks if the popup is a login popup or a suggestion to use the app: if that's not the case, the popup is displayed.\n      const igPopupObserverConfig = { attributes: false, childList: true, subtree: false };\n      const igPopupObserverCallback = function(mutationsList, observeIgPopups) {\n          for(const mutation of mutationsList) {\n            if(mutation.addedNodes.length>0){\n              //console.log(mutation);\n              if(mutation.addedNodes[0].classList.contains(\"RnEpo\")){\n                //console.log(!mutation.addedNodes[0].querySelector(\"[name='username']\"));\n                if((!mutation.addedNodes[0].querySelector(\"[name='username']\"))&&(!mutation.addedNodes[0].querySelector(\"[href*='/accounts/login/']\"))){\n                  let style=\"\";\n                  if(mutation.addedNodes[0].hasAttribute(\"style\")){\n                    style=mutation.addedNodes[0].getAttribute(\"style\");\n                  }\n                   mutation.addedNodes[0].setAttribute(\"style\",\"display: block !important;\"+style);\n                }\n              }\n            }\n          }\n      };\n      const observeIgPopups = new MutationObserver(igPopupObserverCallback);\n      observeIgPopups.observe(document.body, igPopupObserverConfig);\n      if(!document.querySelector(\"[href='/direct/inbox/']\")){\n        igLoadOutsideNote();\n      }\n      //interval_1=setInterval(blockBannerIG,200);\n      if((document.location.href.includes('instagram.com/p/'))||(document.location.href.includes('instagram.com/tv/'))||(document.location.href.includes('/reel/'))){\n        if((document.location.href.includes('/tv/'))){\n          let igtvVideo=document.getElementsByTagName(\"VIDEO\")[0];\n          let cln=igtvVideo.cloneNode(true);\n          insertAfter(cln,igtvVideo);\n          igtvVideo.remove();\n        }\n        interval_0=setInterval(allowVideoReplayStarterIG,500);\n      }\n      else if(document.location.href.includes('/channel')){\n        if(document.getElementsByClassName(\"coreSpriteSearchIcon\").length>0){//only desktop version shows login popup on igtv\n           interval_2=setInterval(removePicturePopupIGTV,1000);\n        }\n      }\n      else if((document.location.href.includes('/reels/'))||\n              (document.location.href.includes('/guides/'))||\n              (document.location.href.includes('/guide/'))){\n        //do nothing;\n      }\n      else{//this should ideally only include the main page of the profile\n        //interval_2=setInterval(blockPopupIG,200);\n        let sectionLinks=document.getElementsByClassName(\"_9VEo1\");\n        for(let sectionLink of sectionLinks){\n        \tif(sectionLink.href.includes(\"%2Ffeed%2F\")){\n            let tmpSectionLink=sectionLink.cloneNode(true);\n            tmpSectionLink.href=document.location.href+\"feed/\";\n            sectionLink=sectionLink.parentNode.replaceChild(tmpSectionLink,sectionLink);\n            break;\n          }\n        }\n        interval_3=setInterval(removeRelatedAccounts,200);\n        interval_2=setInterval(removePicturePopup,500);\n      }\n    }\n    else if(document.location.href.includes('/accounts/login/?next=')){\n      igLoadOutsideNote();\n    }\n    else if(document.location.href.includes(\"reddit.com\")){//reddit has a wide range of different login reminders for installing the app or logging in when browsing from a phone\n      if(document.getElementsByTagName(\"shreddit-app\").length>0){\n      \tredditPatch(true);//isMobile\n      }\n      else{\n        redditPatch(false);\n      }\n    }\n    else if(document.location.href.includes(\"quora.com/\")){\n      quoraPatchObserver();\n    }\n    else if(document.location.href.includes(\"/twitter.com\")||document.location.href.includes(\"//x.com\")||(document.location.href.includes(\".x.com\")&&!document.location.href.includes(\"mobile.x.com\"))){\n      blockBannerTW(\"d\");\n    }\n    else if(document.location.href.includes(\"mobile.x.com\")){\n      blockBannerTW(\"m\");\n    }\n    else if(document.location.href.includes(\"https://ask.fm/\")){\n      removeAskFmLoginPopup();\n    }\n    else if(document.location.href.includes(\"https://vk.com/\")){\n      checkVKLoginPopup(\"d\");\n    }\n    else if(document.location.href.includes(\"https://m.vk.com/\")){\n      checkVKLoginPopup(\"m\");\n    }\n    else if(document.location.href.includes(\"https://www.pinterest.\")){\n      document.body.setAttribute(\"style\", \"overflow-y: auto !important\");\n    }\n    else if(document.location.href.includes(\"tumblr.com\")){\n      tumblrDeClassify();\n      tumblrFreeScroll();\n    }\n    else if(document.location.href.includes(\"tiktok.com\")){\n      interval_0=setInterval(tiktok_waitReady,500);\n      interval_1=setInterval(tiktok_clickList,500);\n    }\n  }\n  else{\n    console.log(\"still non buttons\");\n  }\n}\n//\n//\n//THE FOLLOWING SECTION INCLUDES ALL THE FUNCTIONS THAT ARE SPECIFICAL FOR EACH WEBSITE.\n//Some may be not even needed anymore, some are not updated and some should be added, but all of them should have been named better.\n//\n//\nfunction blockPopupFB(){\n  var popupFB;\n  var loc=document.location.href;\n  if((loc.includes(\"m.facebook.com\"))||(loc.includes(\"iphone.facebook.com\"))||(loc.includes(\"x.facebook.com\"))){\n    popupFB=document.getElementById(\"popup_xout\").parentNode.parentNode.parentNode;\n  }\n  if(popupFB==undefined){\n    popupFB=document.getElementsByClassName(\"_5hn6\")[0];\n    if(popupFB==undefined){\n      popupFB=document.getElementById(\"login_popup_cta_form\").parentNode.parentNode.parentNode.parentNode;\n      let scrollview=document.getElementById(\"scrollview\");\n      if(scrollview){\n        let closePopupButton=document.getElementsByClassName(\"cypi58rs pmk7jnqg fcg2cn6m tkr6xdv7\");\n        if(closePopupButton.length>0){\n          closePopupButton[0].firstChild.click();\n        }\n        else{\n          scrollview.parentNode.lastChild.remove();\n          scrollview.style.scrollbarWidth=\"auto\";\n        }\n      }\n      try{\n      \tdocument.getElementsByClassName(\"asf1osic k4urcfbm j9ispegn poy2od1o tw6a2znq m7u2wfa4 d1544ag0 i3j981x3 rlt63pii i09qtzwb hybvsw6c\")[0].remove();\n      }\n      catch(e){console.log(\"Can't remove element with CSS Selector .asf1osic.k4urcfbm.j9ispegn.poy2od1o.tw6a2znq.m7u2wfa4.d1544ag0.i3j981x3.rlt63pii.i09qtzwb.hybvsw6c\")}\n    }\n  }\n  if(popupFB!==undefined){\n    //popupFB.parentNode.removeChild(popupFB);\n    clearInterval(interval_0);\n  }\n\n}\nfunction removeRelatedAccounts(){\n  let morePostsBtn=document.getElementsByClassName('tCibT qq7_A  z4xUb w5S7h')[0];\n  if(morePostsBtn!==undefined){\n    morePostsBtn.click();\n    clearInterval(interval_3);\n  }\n  else{\n    if(document.querySelector(\"a[href*=\\\"/related_profiles/\\\"]\")){\n      let relatedAccountsSection=document.querySelector(\"a[href*=\\\"/related_profiles/\\\"]\").parentNode.parentNode;\n      var closeButtons=relatedAccountsSection.querySelectorAll(\"button[aria-label][alt]\");\n      if(closeButtons.length>0){\n        for(var i=0;i<closeButtons.length;i++){\n          closeButtons[i].click();\n        }\n        clearInterval(interval_3);\n      }\n    }\n    else{\n      clearInterval(interval_3);\n    }\n  }\n}\nfunction removePicturePopup(){\n  if(!document.location.href.includes(\"/p/\")){\n    var photoLinks=document.getElementsByClassName(\"_aabd _aa8k _aanf\");\n    for(var i=0;i<photoLinks.length;i++){\n      if(photoLinks[i].getAttribute(\"class\").includes(\"repaired\")===false){\n        if(photoLinks[i].getElementsByTagName(\"IMG\")[0].getAttribute(\"src\")!==null){\n          var cln = photoLinks[i].children[0].cloneNode(true);\n          photoLinks[i].removeChild(photoLinks[i].children[0]);\n          photoLinks[i].appendChild(cln);\n          photoLinks[i].setAttribute(\"class\",(photoLinks[i].getAttribute(\"class\")+\" repaired\"));\n          photoLinks[i].children[0].setAttribute(\"target\",\"_blank\");\n          photoLinks[i].children[0].setAttribute(\"rel\",\"noopener noreferrer\");\n          photoLinks[i].children[0].children[0].children[0].children[0].style.visibility=\"visible\";\n        }\n      }\n    }\n  }\n}\nfunction removePicturePopupIGTV(){\n  console.log(\"removing picture popup from igtv\");\n  if(!document.location.href.includes(\"/tv/\")){\n    var videoLinks=document.getElementsByClassName(\"_bz0w\");\n    for(var i=0;i<videoLinks.length;i++){\n      if(videoLinks[i].getAttribute(\"class\").includes(\"repaired\")===false){\n        if(videoLinks[i].getElementsByClassName(\"lVhHa RNL1l\")[0].style.backgroundSrc!==null){\n          var cln = videoLinks[i].cloneNode(true);\n          cln.setAttribute(\"class\",(videoLinks[i].getAttribute(\"class\")+\" repaired\"));\n          insertAfter(cln,videoLinks[i]);\n          videoLinks[i].remove();\n        }\n      }\n    }\n  }\n}\n//this function creates a note that suggests the usage of external services to view Instagram pages, as Instagram is devoting all the possible effort to stop people from watching its content without registering.\n//Current websites listed as external services have been chosen just because they work reliably enough to be used ()\nfunction igLoadOutsideNote(){\n  let note=document.createElement(\"DIV\");\n  note.id=\"extSvcNote\";\n  let noteText=document.createElement(\"SPAN\");\n  let link_1=document.createElement(\"A\");\n  let link_2=document.createElement(\"A\");\n  noteText.textContent=l.igBanNote;\n  note.appendChild(noteText);\n  var username=\"\";\n  var authorId=\"\";\n  var currentURL=window.location.toString();\n  if(document.querySelector(\"[role=tablist]\")){ //if one of the main profile pages\n    if(currentURL.lastIndexOf(\"\\/\")==currentURL.length-1){\n      currentURL=currentURL.substring(0,currentURL.length-1);\n    }\n    username=currentURL.slice(currentURL.indexOf(\"instagram.com/\")+14);\n    link_1.href=\"https://www.picnob.com/profile/\"+username;\n    link_1.textContent=link_1.href;\n    link_2.href=\"https://imginn.com/\"+username;\n    link_2.textContent=link_2.href;\n    link_2.textContent=link_2.href;\n  }\n  else if(document.location.href.includes('/accounts/login/?next=')){ //if it's the forced login page\n    link_1.href=\"https://www.picnob.com/\";\n    link_2.href=\"https://imginn.com/\";\n    link_1.textContent=link_1.href;\n    link_2.textContent=link_2.href;\n    currentURL=currentURL.substring(currentURL.indexOf(\"next=\")+5,currentURL.length);\n    if(currentURL.match(/[/]/g).length==2){\n      username=currentURL.slice(1,currentURL.length-1);\n      link_1.href=link_1.href+\"u/\"+username;\n      link_1.textContent=link_1.href;\n      link_2.href=link_2.href+username;\n      link_2.textContent=link_2.href;\n    }\n  }\n  else{\n    link_1.href=\"https://www.picnob.com/\";\n    link_1.textContent=link_1.href;\n    link_2.href=\"https://imginn.com\";\n    link_2.textContent=link_2.href;\n  }\n  note.appendChild(document.createElement(\"BR\"));\n  note.appendChild(link_1);\n  note.appendChild(document.createElement(\"BR\"));\n  note.appendChild(link_2);\n  console.log(note);\n  const footer=document.body.getElementsByTagName(\"footer\")[0];\n  footer.insertBefore(note,footer.firstChild);\n  try{\n    note.setAttribute(\"style\",\"border: 4px solid #E79; border-radius: 1em; padding: 1em; margin: 2em auto 2em auto; max-width: 935px\"); //style doesn't apply and I don't know why\n  }\n  catch(e){\n    console.log(e)\n  }\n}\nfunction insertAfter(newNode, existingNode) {\n    existingNode.parentNode.insertBefore(newNode, existingNode.nextSibling);\n}\n\n/*function blockPopupIG(){ //kept for reference\n  if(document.getElementsByClassName(\"RnEpo\")[0]!==undefined){\n    setScrollable();\n  }\n}*/\n/*function setScrollable(){ //kept for reference\n  document.body.style.overflow = \"scroll !important\";\n}*/\nfunction blockBannerTW(s){\n  /*if(s=='d'){\n  \tdocument.getElementsByClassName(\"css-1dbjc4n r-16y2uox r-1n0xq6e\")[0].parentNode.parentNode.parentNode.parentNode.remove();\n  }\n  else{\n    var banner=document.getElementsByClassName(\"css-1dbjc4n r-1awozwy r-1pz39u2 r-18u37iz r-16y2uox\")[0].parentNode;\n    if(banner!=='undefined'){\n      banner.parentNode.style.height=\"53px\";\n      banner.remove();\n    }\n    banner=document.getElementsByClassName(\"css-1dbjc4n r-urgr8i r-97e31f\")[0];\n    if(banner!=='undefined'){\n      banner.remove();\n    }\n  }*/\n  document.childNodes[1].style.overflow='';\n  //Thanks to Paul Wynters for the following code:\n  //////////////////////////////////////////////////\n  window.addEventListener('load', (event) => {\n    window.setTimeout(() => { //wait a short amount of time for twitter to set overflow:hidden\n      document.childNodes[1].style.overflow=''; //html element, clear style\n    }, 500);\n  });\n  //////////////////////////////////////////////////\n  if(mutationObserver_0===undefined){\n    function callback_a(mutationList) {\n      mutationList.forEach(function(mutation) {\n        let largeLP;\n        //IF EDITING THIS LIST OF POPUPS, KEEP IT IN SYNC WITH THE POPUPS LISTED IN CUSTOM CSS\n        largeLP=document.querySelector(\".css-1dbjc4n.r-aqfbo4.r-1d2f490.r-12vffkv.r-1xcajam.r-zchlnj.r-ipm5af\");//big login popup triggered when clicking on \"like\" or \"comment\" (mobile)\n        if(largeLP===null){\n          largeLP=document.querySelector(\".css-1dbjc4n.r-1awozwy.r-1kihuf0.r-18u37iz.r-1pi2tsx.r-1777fci.r-1pjcn9w.r-1xcajam.r-ipm5af.r-g6jmlv\");//big login popup triggered when clicking on \"like\" or \"comment\" (desktop);\n        }\n        if(largeLP===null){\n          largeLP=document.querySelector(\".css-1dbjc4n.r-1awozwy.r-14lw9ot.r-1dgieki.r-1efd50x.r-5kkj8d.r-18u37iz.r-16y2uox.r-1a1dyw.r-1swwhx3.r-1j3t67a.r-1qxgc49\");//another popup (i don't remember which one)\n        }\n        if(largeLP===null){\n          largeLP=document.querySelector(\"#layers>.css-1dbjc4n.r-aqfbo4.r-1p0dtai.r-1d2f490.r-12vffkv.r-1xcajam.r-zchlnj>.css-1dbjc4n.r-12vffkv>.css-1dbjc4n.r-12vffkv>.css-1dbjc4n.r-l5o3uw\");//another popup (i don't remember which one)\n        }\n        if(largeLP!==null){\n          if(mutation.target.style.overflow==\"hidden\"){//definitely not the right way to do it, but setting the style attributes with mutation.target.style doesn't work.\n            let restyle=mutation.target.getAttribute(\"style\");\n            restyle=restyle.replace(\"overflow: hidden\",\"overflow: auto scroll\");\n            restyle=restyle.replace(\"margin-right: 17px\",\"margin-right: auto\");\n            restyle=restyle.replace(\"overscroll-behavior-y: none;\",\"overscroll-behavior-y: auto\");\n            restyle=restyle.replace(\"position: fixed\",\"position: unset\");\n           \tmutation.target.setAttribute(\"style\",restyle);\n          }\n        }\n      });\n    }\n    mutationObserver_0 = new MutationObserver(callback_a);\n    mutationObserver_0.observe(document.documentElement, {attributes: true});\n  }\n}\nfunction redditShadowRootPatch(){\n  console.log(\"Patching reddit's shadowDom elements and restoring hidden content\");\n  let blurredContainers=document.querySelectorAll(\"shreddit-blurred-container\");\n  let containers=document.querySelectorAll(\"xpromo-nsfw-blocking-container\");\n  if(containers.length>0){\n    for(c of containers){\n      let stl=document.createElement(\"STYLE\");\n      stl.innerHTML=\".prompt {display: none !important}\";\n      c.shadowRoot.appendChild(stl);\n    }\n  }\n  if(blurredContainers.length>0){\n    for(b of blurredContainers){\n      b.removeAttribute(\"blurred\");\n      let stl=document.createElement(\"STYLE\");\n      stl.innerHTML=\" *{filter: none !important}\";\n      console.log(\"SHADOWROOT\");\n      console.log(b.shadowRoot);\n      b.shadowRoot.appendChild(stl);\n    }\n  }\n}\nfunction redditPatch(isMobile){\n  redditShadowRootPatch();\n  if(document.getElementsByClassName(\"NavFrame__below-top-nav\").length>0){\n    const nav=document.getElementsByClassName(\"NavFrame__below-top-nav\")[0];\n    const config = { attributes: false, childList: true, subtree: true };\n    var firstCheck=true;\n    var redditPic=document.body.getElementsByTagName(\"IMG\");\n    const callback = function(mutationsList, observer) {\n      for(const mutation of mutationsList) {\n        redditShadowRootPatch();\n        if(isMobile){\n          let articles=mutation.target.getElementsByTagName(\"ARTICLE\");\n          if(articles.length>0){\n            for (const article of articles){\n              if(!article.classList.contains(\"replaced\")){\n                if((article.getElementsByTagName(\"video\").length==0)&&(article.getElementsByClassName(\"slideImageMainDiv\").length==0)){\n                  var articleCopy=article.cloneNode(true);\n                  articleCopy.classList.add(\"replaced\");\n                  article.replaceWith(articleCopy);\n                }\n              }\n            }\n          }\n        }\n        if(firstCheck==false){\n          redditPic=mutation.target.getElementsByTagName(\"IMG\");\n        }\n        if(redditPic.length>0){\n          for(var i=0;i<redditPic.length;i++){\n            if((redditPic[i].getAttribute(\"src\").includes(\"blur=\"))&&(redditPic[i].getAttribute(\"src\").includes(\"/preview.\"))){\n              redditPic[i].setAttribute(\"src\",redditPic[i].getAttribute(\"src\").split(\"?\")[0].replace(\"preview\",\"i\"));\n            }\n          }\n          firstCheck=false;\n        }\n      }\n    };\n    const bodyObserver = new MutationObserver(callback);\n    bodyObserver.observe(nav, config);\n  }\n  var previews=document.querySelectorAll(\"[slot=blurred] img[src^='https://preview.']\");\n  for(let p of previews){\n    p.src=p.src.replace(\"preview.redd.it\",\"i.redd.it\");\n  }\n  var previewLinks=document.querySelectorAll(\"[bundlename=media_player_loader]\")\n  for(let pL of previewLinks){\n    pL.parentNode.removeAttribute(\"href\");\n  }\n  //Thanks to https://greasyfork.org/en/users/730548-spacex for the following code\n  var bodyChildren = document.getElementsByTagName('body')[0].children;\n  for (var i = 0; i < bodyChildren.length; i++) {\n    try {\n      if (bodyChildren[i].style.backdropFilter){\n          bodyChildren[i].style.backdropFilter = 'none';\n      }\n    }\n    catch (err){}\n  }\n  //Thanks!\n}\nfunction quoraPatchObserver(){\n  var firstCheck=true;\n  var searchBox=document.createElement(\"DIV\");\n  searchBox.className=\"q-flex qu-alignItems--center qu-justifyContent--center\";\n  searchBox.style=\"box-sizing: border-box; display: flex; max-width: 100%;\";\n  let a=document.createElement(\"INPUT\");\n  a.id=\"search\";\n  a.style=\"height: 44px; text-align: center; border-radius: 22px; background-color:white; width: 100%; margin: 0.5em\";\n  a.className=\"selector_input text\";\n  a.value=\"\";\n  a.setAttribute(\"data-lpignore\",\"true\");\n  a.setAttribute(\"data-group\",\"js-editable\");\n  a.setAttribute(\"placeholder\",\"Search\");\n  a.setAttribute(\"w2cid\",\"wS7KcEIg18\");\n  searchBox.appendChild(a);\n  searchBox.addEventListener('keypress', function(e){searchQuora(e);});\n  try{\n  \tdocument.getElementsByClassName(\"q-sticky qu-zIndex--header\")[0].appendChild(searchBox);\n  }\n  catch(e){\n    try{\n      document.getElementsByClassName(\"header_main\")[0].appendChild(searchBox);\n      document.getElementsByClassName(\"query_title\")[0].style.marginTop=\"2em\";\n    }catch(err){console.log(\"Info: if you are browsing from a PC, this error is expected.\");}\n  }\n  quoraPatch(firstCheck);\n  firstCheck=false;\n  const config = { attributes: true, childList: true, subtree: false };//this rough implementation is slower\n  const callback = function(mutationsList, observer) {\n    for(const mutation of mutationsList) {\n\t\t\t\tquoraPatch(firstCheck);\n    }\n  };\n  const bodyObserver = new MutationObserver(callback);\n  bodyObserver.observe(document.body, config);\n}\nfunction quoraPatch(firstCheck){\n  var i;\n  var wall;\n  if(firstCheck==true){\n    wall=document.getElementsByClassName(\"q-box qu-overflow--hidden\");\n    if(wall.length>1){\n      let bgColor=getComputedStyle(wall[0].parentNode.children[0]).backgroundColor;\n      if(bgColor==\"rgba(68, 68, 68, 0.85)\"){\n        wall[0].parentNode.children[0].remove();\n        wall[0].classList.remove(\"qu-overflow--hidden\");\n      }\n    }\n  }\n  if(document.body.className.includes('signup_wall_prevent_scroll')){\n    document.body.classList.remove('signup_wall_prevent_scroll');\n  }\n  wall=document.getElementsByClassName('new_web_signup_wall_design');\n  if(wall.length>0){\n    wall[0].parentNode.parentNode.remove();//desktop\n  }\n  wall=document.getElementsByClassName('modal_bg new_signup_dialog');\n  if(wall.length>0){\n    wall[0].parentNode.remove();//mobile\n  }\n  wall=document.getElementsByClassName('q-absolute qu-full qu-bg--blue');\n  if(wall.length>0){\n    wall[0].parentNode.remove();//mobile\n  }\n}\nfunction searchQuora(e) {\n  if (e.key === 'Enter') {\n    window.open(\"https://www.quora.com/search?q=\"+document.getElementById(\"search\").value,\"_self\");\n  }\n}\nfunction removeAskFmLoginPopup(){\n  try{\n    const closeButton=document.createElement(\"DIV\");\n    closeButton.id=\"closeButton\";\n    closeButton.style.padding=\"1em\";\n    closeButton.style.right=\"1em\";\n    closeButton.style.top=\"1em\";\n    closeButton.style.position=\"absolute\";\n    closeButton.textContent=\"X\";\n    closeButton.style.borderRadius=\"3px\";\n    closeButton.style.backgroundColor=\"#666666\";\n    closeButton.style.color=\"#FFFFFF\";\n    closeButton.style.cursor=\"pointer\";\n    closeButton.addEventListener(\"click\",function(e){document.getElementsByClassName(\"lightbox_overlay\")[0].remove();});\n    var lightbox=document.getElementsByClassName(\"lightbox_overlay\");\n    console.log(lightbox.length);\n    if(lightbox.length>0){\n      if(lightbox[0].getElementsByClassName(\"lightbox_content-conversion\").length>0){\n        lightbox[0].parentNode.removeChild(lightbox[0]);\n      }\n    }\n    const callback = function(mutationsList, observer) {\n      for(const mutation of mutationsList) {\n        console.log(\"A\");\n        for(let newNode of mutation.addedNodes){\n          if(newNode.className.includes(\"lightbox_overlay\")){\n            if(newNode.getElementsByClassName(\"lightbox_content-conversion\").length>0){\n              console.log(\"popup deleted\");\n              newNode.parentNode.removeChild(newNode);\n            }\n            else{\n              newNode.appendChild(closeButton);\n            }\n          }\n        }\n      }\n    };\n    const config = { attributes: false, childList: true, subtree: true };\n    const observer = new MutationObserver(callback);\n    observer.observe(document.documentElement, config);\n  }\n  catch(err){console.log(\"ERROR: \"+err);}\n}\nfunction checkVKLoginPopup(mode){\n  const popups=document.getElementsByClassName(\"UnauthActionBoxContainer\");\n  if(popups.length>0){\n    removeVKLoginPopup(popups[0]);\n  }\n  const config = { attributes: false, childList: true, subtree: false };\n  const callback = function(mutationsList, observer) {\n    for(const mutation of mutationsList) {\n      for(let newNode of mutation.addedNodes){\n      \tif(newNode.className.includes(\"UnauthActionBoxContainer\")){\n          removeVKLoginPopup(newNode,mode);\n        }\n        else if(newNode.getElementsByClassName(\"UnauthorizedActionModal\")!==undefined){\n          removeVKLoginPopup(newNode,mode);\n        }\n      }\n    }\n  };\n  const observer = new MutationObserver(callback);\n  if(mode==\"d\"){\n  \tobserver.observe(document.getElementById(\"box_layer\"), config);\n  }\n  else{\n    observer.observe(document.body, config);\n  }\n}\nfunction removeVKLoginPopup(popup,mode){\n  popup.remove();\n  console.log(\"Popup removed\");\n  if(mode==\"d\"){\n  \tdocument.getElementById(\"box_layer_bg\").remove();\n  \tdocument.getElementById(\"box_layer_wrap\").remove();\n  }\n  else{\n    document.getElementById(\"popup_wrap\").remove();\n\t\tdocument.getElementById(\"popup_overlay\").remove();\n  }\n}\nfunction allowVideoReplayStarterIG(){\n  var imgBox=document.getElementsByClassName(\"pR7Pc\");\n  if(imgBox.length==0){\n    imgBox=document.getElementsByClassName(\"kPFhm B1JlO OAXCp\");\n  }\n  if(imgBox.length==0){\n    imgBox=document.getElementsByClassName(\"_aatk\");\n  }\n  if(imgBox.length>0){\n    let videoPlayer=imgBox[0].getElementsByTagName(\"VIDEO\");\n    if(videoPlayer.length>0){\n      let moveTagCss=document.createElement(\"style\");\n      moveTagCss.textContent=\".LcKDX, ._7zNgw.GLdVF {bottom: 3em}\";\n      document.body.appendChild(moveTagCss);\n      for (let vp of videoPlayer){\n        vp.controls=true;\n      }\n    }\n  \tallowVideoReplayIG(imgBox[0]);\n    clearInterval(interval_0);\n  }\n}\nfunction allowVideoReplayIG(imgBox){\n  console.log(\"add video controls\");\n  const config = { attributes: false, childList: true, subtree: true };\n  const callback = function(mutationsList, observer) {\n    for(const mutation of mutationsList) {\n      for(let newNode of mutation.addedNodes){\n\t\t\t\tlet videoPlayer=newNode.getElementsByTagName(\"VIDEO\");\n        if(videoPlayer.length>0){\n          for (var vp of videoPlayer){\n            vp.controls=true;\n          }\n        }\n      }\n    }\n  };\n  const observer = new MutationObserver(callback);\n  observer.observe(imgBox, config);\n}\nfunction tumblrDeClassify(){\n  const config = { attributes: false, childList: true, subtree: false };\n  const callback = function(mutationsList, observer) {\n    for(const mutation of mutationsList) {\n      for(let newNode of mutation.addedNodes){\n        if(newNode.querySelector(\"[href^='/auth/']\")){\n          newNode.remove();\n        }\n      }\n    }\n  };\n  const observer = new MutationObserver(callback);\n  observer.observe(document.getElementById(\"glass-container\"), config);\n}\nfunction tumblrFreeScroll(){\n  unsafeWindow.scrollTo=function(){};\n  unsafeWindow.scrollY=function(){};\n  unsafeWindow.scrollX=function(){};\n}\nfunction tiktok_waitReady(){\n  let lockStyle=document.querySelector(\".tux-base-dialog.z-2000\");\n  if(lockStyle!==null){\n    tiktok_removeAnnoyances(lockStyle);\n    clearInterval(interval_0);\n  }\n}\nfunction tiktok_clickList(){\n  let list=document.getElementsByTagName(\"UL\");\n  if(list.length>0){\n    if(list[0].getElementsByTagName(\"LI\").length>0){\n      tiktok_openLinksWithoutApp(list[0]);\n      clearInterval(interval_1);\n    }\n  }\n}\nfunction tiktok_removeAnnoyances(lockStyle){\n  lockStyle.remove();\n  var possibleBanners=document.body.querySelectorAll(\"div[data-theme=light]\");\n  console.log(possibleBanners);\n  for(let i=possibleBanners.length-1;i>=0;i--){//reverse check so if one element is parent of another, the child will be removed\n    let res=possibleBanners[i].querySelector(\"g[clip-path*=TikTok_Logo_Dark]\");\n    if(res!==null){\n      possibleBanners[i].remove();\n      break;\n    }\n  }\n}\nfunction tiktok_openLinksWithoutApp(list){\n    var recommended=document.body.getElementsByClassName(\"recommend-item\");\n    for(let r of recommended){\n      r.addEventListener(\"click\", function(event){\n        event.stopPropagation();\n        window.stop();\n        window.open(event.target.getAttribute(\"href\"));\n        window.close();\n\n      });\n      r.setAttribute(\"href\",r.getElementsByTagName(\"A\")[0].href);\n    }\n    const targetNode = list;\n    const config = { attributes: false, childList: true, subtree: true };\n    const callback = (mutationList, observer) => {\n        for (const mutation of mutationList) {\n          console.log(mutation.target);\n          if(mutation.target.classList.includes(\"recommend-item\")){\n            mutation.target.addEventListener(\"click\", function(event){\n              event.stopPropagation();\n              document.location.replace(event.target.getAttribute(\"href\"));\n            });\n            mutation.target.setAttribute(\"href\",r.getElementsByTagName(\"A\")[0].href);\n          }\n        }\n    };\n    const observer = new MutationObserver(callback);\n    observer.observe(targetNode, config);\n}",
    "css": ""
  },
  "_Simple YouTube Age Restriction Bypass": {
    "name": "Simple YouTube Age Restriction Bypass",
    "author": "Zerody (https://github.com/zerodytrash)",
    "description": "Watch age restricted videos on YouTube without login and without age verification 😎",
    "version": "2.5.9",
    "updateURL": "https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/raw/main/dist/Simple-YouTube-Age-Restriction-Bypass.user.js",
    "metaURL": "",
    "preprocessor": "",
    "injectInto": "",
    "runAt": "document_start",
    "allFrames": false,
    "matchAboutBlank": false,
    "antifeatures": [],
    "container": [],
    "excludes": [],
    "includes": [],
    "require": [],
    "resource": {},
    "matches": [
      "https://www.youtube.com/*",
      "https://www.youtube-nocookie.com/*",
      "https://m.youtube.com/*",
      "https://music.youtube.com/*"
    ],
    "excludeMatches": [],
    "includeGlobs": [],
    "excludeGlobs": [],
    "grant": [
      "none"
    ],
    "i18n": {
      "name": {},
      "description": {
        "de": "Schaue YouTube Videos mit Altersbeschränkungen ohne Anmeldung und ohne dein Alter zu bestätigen 😎",
        "fr": "Regardez des vidéos YouTube avec des restrictions d'âge sans vous inscrire et sans confirmer votre âge 😎",
        "it": "Guarda i video con restrizioni di età su YouTube senza login e senza verifica dell'età 😎"
      }
    },
    "storage": {},
    "userMeta": "",
    "userVar": {},
    "autoUpdate": false,
    "enabled": true,
    "error": "",
    "requireRemote": [],
    "style": [],
    "js": "// ==UserScript==\n// @name            Simple YouTube Age Restriction Bypass\n// @description     Watch age restricted videos on YouTube without login and without age verification 😎\n// @description:de  Schaue YouTube Videos mit Altersbeschränkungen ohne Anmeldung und ohne dein Alter zu bestätigen 😎\n// @description:fr  Regardez des vidéos YouTube avec des restrictions d'âge sans vous inscrire et sans confirmer votre âge 😎\n// @description:it  Guarda i video con restrizioni di età su YouTube senza login e senza verifica dell'età 😎\n// @icon            https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/raw/v2.5.4/src/extension/icon/icon_64.png\n// @version         2.5.9\n// @author          Zerody (https://github.com/zerodytrash)\n// @namespace       https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/\n// @supportURL      https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/issues\n// @updateURL       https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/raw/main/dist/Simple-YouTube-Age-Restriction-Bypass.user.js\n// @license         MIT\n// @match           https://www.youtube.com/*\n// @match           https://www.youtube-nocookie.com/*\n// @match           https://m.youtube.com/*\n// @match           https://music.youtube.com/*\n// @grant           none\n// @run-at          document-start\n// @compatible      chrome\n// @compatible      firefox\n// @compatible      opera\n// @compatible      edge\n// @compatible      safari\n// ==/UserScript==\n\n/*\n    This is a transpiled version to achieve a clean code base and better browser compatibility.\n    You can find the nicely readable source code at https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass\n*/\n\n(function iife(ranOnce) {\n    // Trick to get around the sandbox restrictions in Greasemonkey (Firefox)\n    // Inject code into the main window if criteria match\n    if (this !== window && !ranOnce) {\n        window.eval('(' + iife.toString() + ')(true);');\n        return;\n    }\n\n    // Script configuration variables\n    const UNLOCKABLE_PLAYABILITY_STATUSES = ['AGE_VERIFICATION_REQUIRED', 'AGE_CHECK_REQUIRED', 'CONTENT_CHECK_REQUIRED', 'LOGIN_REQUIRED'];\n    const VALID_PLAYABILITY_STATUSES = ['OK', 'LIVE_STREAM_OFFLINE'];\n\n    // These are the proxy servers that are sometimes required to unlock videos with age restrictions.\n    // You can host your own account proxy instance. See https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/tree/main/account-proxy\n    // To learn what information is transferred, please read: https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass#privacy\n    const ACCOUNT_PROXY_SERVER_HOST = 'https://youtube-proxy.zerody.one';\n    const VIDEO_PROXY_SERVER_HOST = 'https://ny.4everproxy.com';\n\n    // User needs to confirm the unlock process on embedded player?\n    let ENABLE_UNLOCK_CONFIRMATION_EMBED = true;\n\n    // Show notification?\n    let ENABLE_UNLOCK_NOTIFICATION = true;\n\n    // Disable content warnings?\n    let SKIP_CONTENT_WARNINGS = true;\n\n    // Some Innertube bypass methods require the following authentication headers of the currently logged in user.\n    const GOOGLE_AUTH_HEADER_NAMES = ['Authorization', 'X-Goog-AuthUser', 'X-Origin'];\n\n    /**\n     * The SQP parameter length is different for blurred thumbnails.\n     * They contain much less information, than normal thumbnails.\n     * The thumbnail SQPs tend to have a long and a short version.\n     */\n    const BLURRED_THUMBNAIL_SQP_LENGTHS = [\n        32, // Mobile (SHORT)\n        48, // Desktop Playlist (SHORT)\n        56, // Desktop (SHORT)\n        68, // Mobile (LONG)\n        72, // Mobile Shorts\n        84, // Desktop Playlist (LONG)\n        88, // Desktop (LONG)\n    ];\n\n    // small hack to prevent tree shaking on these exports\n    var Config = window[Symbol()] = {\n        UNLOCKABLE_PLAYABILITY_STATUSES,\n        VALID_PLAYABILITY_STATUSES,\n        ACCOUNT_PROXY_SERVER_HOST,\n        VIDEO_PROXY_SERVER_HOST,\n        ENABLE_UNLOCK_CONFIRMATION_EMBED,\n        ENABLE_UNLOCK_NOTIFICATION,\n        SKIP_CONTENT_WARNINGS,\n        GOOGLE_AUTH_HEADER_NAMES,\n        BLURRED_THUMBNAIL_SQP_LENGTHS,\n    };\n\n    function isGoogleVideoUrl(url) {\n        return url.host.includes('.googlevideo.com');\n    }\n\n    function isGoogleVideoUnlockRequired(googleVideoUrl, lastProxiedGoogleVideoId) {\n        const urlParams = new URLSearchParams(googleVideoUrl.search);\n        const hasGcrFlag = urlParams.get('gcr');\n        const wasUnlockedByAccountProxy = urlParams.get('id') === lastProxiedGoogleVideoId;\n\n        return hasGcrFlag && wasUnlockedByAccountProxy;\n    }\n\n    const nativeJSONParse = window.JSON.parse;\n    const nativeXMLHttpRequestOpen = window.XMLHttpRequest.prototype.open;\n\n    const isDesktop = window.location.host !== 'm.youtube.com';\n    const isMusic = window.location.host === 'music.youtube.com';\n    const isEmbed = window.location.pathname.indexOf('/embed/') === 0;\n    const isConfirmed = window.location.search.includes('unlock_confirmed');\n\n    class Deferred {\n        constructor() {\n            return Object.assign(\n                new Promise((resolve, reject) => {\n                    this.resolve = resolve;\n                    this.reject = reject;\n                }),\n                this,\n            );\n        }\n    }\n\n    function createElement(tagName, options) {\n        const node = document.createElement(tagName);\n        options && Object.assign(node, options);\n        return node;\n    }\n\n    function isObject(obj) {\n        return obj !== null && typeof obj === 'object';\n    }\n\n    function findNestedObjectsByAttributeNames(object, attributeNames) {\n        var results = [];\n\n        // Does the current object match the attribute conditions?\n        if (attributeNames.every((key) => typeof object[key] !== 'undefined')) {\n            results.push(object);\n        }\n\n        // Diggin' deeper for each nested object (recursive)\n        Object.keys(object).forEach((key) => {\n            if (object[key] && typeof object[key] === 'object') {\n                results.push(...findNestedObjectsByAttributeNames(object[key], attributeNames));\n            }\n        });\n\n        return results;\n    }\n\n    function pageLoaded() {\n        if (document.readyState === 'complete') return Promise.resolve();\n\n        const deferred = new Deferred();\n\n        window.addEventListener('load', deferred.resolve, { once: true });\n\n        return deferred;\n    }\n\n    function createDeepCopy(obj) {\n        return nativeJSONParse(JSON.stringify(obj));\n    }\n\n    function getYtcfgValue(name) {\n        var _window$ytcfg;\n        return (_window$ytcfg = window.ytcfg) === null || _window$ytcfg === void 0 ? void 0 : _window$ytcfg.get(name);\n    }\n\n    function getSignatureTimestamp() {\n        return (\n            getYtcfgValue('STS')\n            || (() => {\n                var _document$querySelect;\n                // STS is missing on embedded player. Retrieve from player base script as fallback...\n                const playerBaseJsPath = (_document$querySelect = document.querySelector('script[src*=\"/base.js\"]')) === null || _document$querySelect === void 0\n                    ? void 0\n                    : _document$querySelect.src;\n\n                if (!playerBaseJsPath) return;\n\n                const xmlhttp = new XMLHttpRequest();\n                xmlhttp.open('GET', playerBaseJsPath, false);\n                xmlhttp.send(null);\n\n                return parseInt(xmlhttp.responseText.match(/signatureTimestamp:([0-9]*)/)[1]);\n            })()\n        );\n    }\n\n    function isUserLoggedIn() {\n        // LOGGED_IN doesn't exist on embedded page, use DELEGATED_SESSION_ID or SESSION_INDEX as fallback\n        if (typeof getYtcfgValue('LOGGED_IN') === 'boolean') return getYtcfgValue('LOGGED_IN');\n        if (typeof getYtcfgValue('DELEGATED_SESSION_ID') === 'string') return true;\n        if (parseInt(getYtcfgValue('SESSION_INDEX')) >= 0) return true;\n\n        return false;\n    }\n\n    function getCurrentVideoStartTime(currentVideoId) {\n        // Check if the URL corresponds to the requested video\n        // This is not the case when the player gets preloaded for the next video in a playlist.\n        if (window.location.href.includes(currentVideoId)) {\n            var _ref;\n            // \"t\"-param on youtu.be urls\n            // \"start\"-param on embed player\n            // \"time_continue\" when clicking \"watch on youtube\" on embedded player\n            const urlParams = new URLSearchParams(window.location.search);\n            const startTimeString = (_ref = urlParams.get('t') || urlParams.get('start') || urlParams.get('time_continue')) === null || _ref === void 0\n                ? void 0\n                : _ref.replace('s', '');\n\n            if (startTimeString && !isNaN(startTimeString)) {\n                return parseInt(startTimeString);\n            }\n        }\n\n        return 0;\n    }\n\n    function setUrlParams(params) {\n        const urlParams = new URLSearchParams(window.location.search);\n        for (const paramName in params) {\n            urlParams.set(paramName, params[paramName]);\n        }\n        window.location.search = urlParams;\n    }\n\n    function waitForElement(elementSelector, timeout) {\n        const deferred = new Deferred();\n\n        const checkDomInterval = setInterval(() => {\n            const elem = document.querySelector(elementSelector);\n            if (elem) {\n                clearInterval(checkDomInterval);\n                deferred.resolve(elem);\n            }\n        }, 100);\n\n        if (timeout) {\n            setTimeout(() => {\n                clearInterval(checkDomInterval);\n                deferred.reject();\n            }, timeout);\n        }\n\n        return deferred;\n    }\n\n    function parseRelativeUrl(url) {\n        if (typeof url !== 'string') {\n            return null;\n        }\n\n        if (url.indexOf('/') === 0) {\n            url = window.location.origin + url;\n        }\n\n        try {\n            return url.indexOf('https://') === 0 ? new window.URL(url) : null;\n        } catch {\n            return null;\n        }\n    }\n\n    function isWatchNextObject(parsedData) {\n        var _parsedData$currentVi;\n        if (\n            !(parsedData !== null && parsedData !== void 0 && parsedData.contents)\n            || !(parsedData !== null && parsedData !== void 0 && (_parsedData$currentVi = parsedData.currentVideoEndpoint) !== null && _parsedData$currentVi !== void 0\n                && (_parsedData$currentVi = _parsedData$currentVi.watchEndpoint) !== null && _parsedData$currentVi !== void 0 && _parsedData$currentVi.videoId)\n        ) return false;\n        return !!parsedData.contents.twoColumnWatchNextResults || !!parsedData.contents.singleColumnWatchNextResults;\n    }\n\n    function isWatchNextSidebarEmpty(parsedData) {\n        var _parsedData$contents2, _content$find;\n        if (isDesktop) {\n            var _parsedData$contents;\n            // WEB response layout\n            const result = (_parsedData$contents = parsedData.contents) === null || _parsedData$contents === void 0\n                    || (_parsedData$contents = _parsedData$contents.twoColumnWatchNextResults) === null || _parsedData$contents === void 0\n                    || (_parsedData$contents = _parsedData$contents.secondaryResults) === null || _parsedData$contents === void 0\n                    || (_parsedData$contents = _parsedData$contents.secondaryResults) === null || _parsedData$contents === void 0\n                ? void 0\n                : _parsedData$contents.results;\n            return !result;\n        }\n\n        // MWEB response layout\n        const content = (_parsedData$contents2 = parsedData.contents) === null || _parsedData$contents2 === void 0\n                || (_parsedData$contents2 = _parsedData$contents2.singleColumnWatchNextResults) === null || _parsedData$contents2 === void 0\n                || (_parsedData$contents2 = _parsedData$contents2.results) === null || _parsedData$contents2 === void 0\n                || (_parsedData$contents2 = _parsedData$contents2.results) === null || _parsedData$contents2 === void 0\n            ? void 0\n            : _parsedData$contents2.contents;\n        const result = content === null || content === void 0 || (_content$find = content.find((e) => {\n                    var _e$itemSectionRendere;\n                    return ((_e$itemSectionRendere = e.itemSectionRenderer) === null || _e$itemSectionRendere === void 0 ? void 0 : _e$itemSectionRendere.targetId)\n                        === 'watch-next-feed';\n                })) === null\n                || _content$find === void 0\n            ? void 0\n            : _content$find.itemSectionRenderer;\n        return typeof result !== 'object';\n    }\n\n    function isPlayerObject(parsedData) {\n        return (parsedData === null || parsedData === void 0 ? void 0 : parsedData.videoDetails)\n            && (parsedData === null || parsedData === void 0 ? void 0 : parsedData.playabilityStatus);\n    }\n\n    function isEmbeddedPlayerObject(parsedData) {\n        return typeof (parsedData === null || parsedData === void 0 ? void 0 : parsedData.previewPlayabilityStatus) === 'object';\n    }\n\n    function isAgeRestricted(playabilityStatus) {\n        var _playabilityStatus$er;\n        if (!(playabilityStatus !== null && playabilityStatus !== void 0 && playabilityStatus.status)) return false;\n        if (playabilityStatus.desktopLegacyAgeGateReason) return true;\n        if (Config.UNLOCKABLE_PLAYABILITY_STATUSES.includes(playabilityStatus.status)) return true;\n\n        // Fix to detect age restrictions on embed player\n        // see https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/issues/85#issuecomment-946853553\n        return (\n            isEmbed\n            && ((_playabilityStatus$er = playabilityStatus.errorScreen) === null || _playabilityStatus$er === void 0\n                    || (_playabilityStatus$er = _playabilityStatus$er.playerErrorMessageRenderer) === null || _playabilityStatus$er === void 0\n                    || (_playabilityStatus$er = _playabilityStatus$er.reason) === null || _playabilityStatus$er === void 0\n                    || (_playabilityStatus$er = _playabilityStatus$er.runs) === null || _playabilityStatus$er === void 0\n                    || (_playabilityStatus$er = _playabilityStatus$er.find((x) => x.navigationEndpoint)) === null || _playabilityStatus$er === void 0\n                    || (_playabilityStatus$er = _playabilityStatus$er.navigationEndpoint) === null || _playabilityStatus$er === void 0\n                    || (_playabilityStatus$er = _playabilityStatus$er.urlEndpoint) === null || _playabilityStatus$er === void 0\n                    || (_playabilityStatus$er = _playabilityStatus$er.url) === null || _playabilityStatus$er === void 0\n                ? void 0\n                : _playabilityStatus$er.includes('/2802167'))\n        );\n    }\n\n    function isSearchResult(parsedData) {\n        var _parsedData$contents3, _parsedData$contents4, _parsedData$onRespons;\n        return (\n            typeof (parsedData === null || parsedData === void 0 || (_parsedData$contents3 = parsedData.contents) === null || _parsedData$contents3 === void 0\n                    ? void 0\n                    : _parsedData$contents3.twoColumnSearchResultsRenderer) === 'object' // Desktop initial results\n            || (parsedData === null || parsedData === void 0 || (_parsedData$contents4 = parsedData.contents) === null || _parsedData$contents4 === void 0\n                        || (_parsedData$contents4 = _parsedData$contents4.sectionListRenderer) === null || _parsedData$contents4 === void 0\n                    ? void 0\n                    : _parsedData$contents4.targetId) === 'search-feed' // Mobile initial results\n            || (parsedData === null || parsedData === void 0 || (_parsedData$onRespons = parsedData.onResponseReceivedCommands) === null || _parsedData$onRespons === void 0\n                        || (_parsedData$onRespons = _parsedData$onRespons.find((x) => x.appendContinuationItemsAction)) === null || _parsedData$onRespons === void 0\n                        || (_parsedData$onRespons = _parsedData$onRespons.appendContinuationItemsAction) === null || _parsedData$onRespons === void 0\n                    ? void 0\n                    : _parsedData$onRespons.targetId) === 'search-feed' // Desktop & Mobile scroll continuation\n        );\n    }\n\n    function attach$4(obj, prop, onCall) {\n        if (!obj || typeof obj[prop] !== 'function') {\n            return;\n        }\n\n        let original = obj[prop];\n\n        obj[prop] = function() {\n            try {\n                onCall(arguments);\n            } catch {}\n            original.apply(this, arguments);\n        };\n    }\n\n    const logPrefix = '%cSimple-YouTube-Age-Restriction-Bypass:';\n    const logPrefixStyle = 'background-color: #1e5c85; color: #fff; font-size: 1.2em;';\n    const logSuffix = '\\uD83D\\uDC1E You can report bugs at: https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/issues';\n\n    function error(err, msg) {\n        console.error(logPrefix, logPrefixStyle, msg, err, getYtcfgDebugString(), '\\n\\n', logSuffix);\n        if (window.SYARB_CONFIG) {\n            window.dispatchEvent(\n                new CustomEvent('SYARB_LOG_ERROR', {\n                    detail: {\n                        message: (msg ? msg + '; ' : '') + (err && err.message ? err.message : ''),\n                        stack: err && err.stack ? err.stack : null,\n                    },\n                }),\n            );\n        }\n    }\n\n    function info(msg) {\n        console.info(logPrefix, logPrefixStyle, msg);\n        if (window.SYARB_CONFIG) {\n            window.dispatchEvent(\n                new CustomEvent('SYARB_LOG_INFO', {\n                    detail: {\n                        message: msg,\n                    },\n                }),\n            );\n        }\n    }\n\n    function getYtcfgDebugString() {\n        try {\n            return (\n                `InnertubeConfig: `\n                + `innertubeApiKey: ${getYtcfgValue('INNERTUBE_API_KEY')} `\n                + `innertubeClientName: ${getYtcfgValue('INNERTUBE_CLIENT_NAME')} `\n                + `innertubeClientVersion: ${getYtcfgValue('INNERTUBE_CLIENT_VERSION')} `\n                + `loggedIn: ${getYtcfgValue('LOGGED_IN')} `\n            );\n        } catch (err) {\n            return `Failed to access config: ${err}`;\n        }\n    }\n\n    /**\n     * And here we deal with YouTube's crappy initial data (present in page source) and the problems that occur when intercepting that data.\n     * YouTube has some protections in place that make it difficult to intercept and modify the global ytInitialPlayerResponse variable.\n     * The easiest way would be to set a descriptor on that variable to change the value directly on declaration.\n     * But some adblockers define their own descriptors on the ytInitialPlayerResponse variable, which makes it hard to register another descriptor on it.\n     * As a workaround only the relevant playerResponse property of the ytInitialPlayerResponse variable will be intercepted.\n     * This is achieved by defining a descriptor on the object prototype for that property, which affects any object with a `playerResponse` property.\n     */\n    function attach$3(onInitialData) {\n        interceptObjectProperty('playerResponse', (obj, playerResponse) => {\n            info(`playerResponse property set, contains sidebar: ${!!obj.response}`);\n\n            // The same object also contains the sidebar data and video description\n            if (isObject(obj.response)) onInitialData(obj.response);\n\n            // If the script is executed too late and the bootstrap data has already been processed,\n            // a reload of the player can be forced by creating a deep copy of the object.\n            // This is especially relevant if the userscript manager does not handle the `@run-at document-start` correctly.\n            playerResponse.unlocked = false;\n            onInitialData(playerResponse);\n            return playerResponse.unlocked ? createDeepCopy(playerResponse) : playerResponse;\n        });\n\n        // The global `ytInitialData` variable can be modified on the fly.\n        // It contains search results, sidebar data and meta information\n        // Not really important but fixes https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/issues/127\n        window.addEventListener('DOMContentLoaded', () => {\n            if (isObject(window.ytInitialData)) {\n                onInitialData(window.ytInitialData);\n            }\n        });\n    }\n\n    function interceptObjectProperty(prop, onSet) {\n        var _Object$getOwnPropert;\n        // Allow other userscripts to decorate this descriptor, if they do something similar\n        const dataKey = '__SYARB_' + prop;\n        const { get: getter, set: setter } = (_Object$getOwnPropert = Object.getOwnPropertyDescriptor(Object.prototype, prop)) !== null && _Object$getOwnPropert !== void 0\n            ? _Object$getOwnPropert\n            : {\n                set(value) {\n                    this[dataKey] = value;\n                },\n                get() {\n                    return this[dataKey];\n                },\n            };\n\n        // Intercept the given property on any object\n        // The assigned attribute value and the context (enclosing object) are passed to the onSet function.\n        Object.defineProperty(Object.prototype, prop, {\n            set(value) {\n                setter.call(this, isObject(value) ? onSet(this, value) : value);\n            },\n            get() {\n                return getter.call(this);\n            },\n            configurable: true,\n        });\n    }\n\n    // Intercept, inspect and modify JSON-based communication to unlock player responses by hijacking the JSON.parse function\n    function attach$2(onJsonDataReceived) {\n        window.JSON.parse = function() {\n            const data = nativeJSONParse.apply(this, arguments);\n            return isObject(data) ? onJsonDataReceived(data) : data;\n        };\n    }\n\n    function attach$1(onRequestCreate) {\n        if (typeof window.Request !== 'function') {\n            return;\n        }\n\n        window.Request = new Proxy(window.Request, {\n            construct(target, args) {\n                const [url, options] = args;\n                try {\n                    const parsedUrl = parseRelativeUrl(url);\n                    const modifiedUrl = onRequestCreate(parsedUrl, options);\n\n                    if (modifiedUrl) {\n                        args[0] = modifiedUrl.toString();\n                    }\n                } catch (err) {\n                    error(err, `Failed to intercept Request()`);\n                }\n\n                return Reflect.construct(...arguments);\n            },\n        });\n    }\n\n    function attach(onXhrOpenCalled) {\n        XMLHttpRequest.prototype.open = function(method, url) {\n            try {\n                let parsedUrl = parseRelativeUrl(url);\n\n                if (parsedUrl) {\n                    const modifiedUrl = onXhrOpenCalled(method, parsedUrl, this);\n\n                    if (modifiedUrl) {\n                        arguments[1] = modifiedUrl.toString();\n                    }\n                }\n            } catch (err) {\n                error(err, `Failed to intercept XMLHttpRequest.open()`);\n            }\n\n            nativeXMLHttpRequestOpen.apply(this, arguments);\n        };\n    }\n\n    const localStoragePrefix = 'SYARB_';\n\n    function set(key, value) {\n        localStorage.setItem(localStoragePrefix + key, JSON.stringify(value));\n    }\n\n    function get(key) {\n        try {\n            return JSON.parse(localStorage.getItem(localStoragePrefix + key));\n        } catch {\n            return null;\n        }\n    }\n\n    function getPlayer$1(payload, useAuth) {\n        return sendInnertubeRequest('v1/player', payload, useAuth);\n    }\n\n    function getNext$1(payload, useAuth) {\n        return sendInnertubeRequest('v1/next', payload, useAuth);\n    }\n\n    function sendInnertubeRequest(endpoint, payload, useAuth) {\n        const xmlhttp = new XMLHttpRequest();\n        xmlhttp.open('POST', `/youtubei/${endpoint}?key=${getYtcfgValue('INNERTUBE_API_KEY')}&prettyPrint=false`, false);\n\n        if (useAuth && isUserLoggedIn()) {\n            xmlhttp.withCredentials = true;\n            Config.GOOGLE_AUTH_HEADER_NAMES.forEach((headerName) => {\n                xmlhttp.setRequestHeader(headerName, get(headerName));\n            });\n        }\n\n        xmlhttp.send(JSON.stringify(payload));\n        return nativeJSONParse(xmlhttp.responseText);\n    }\n\n    var innertube = {\n        getPlayer: getPlayer$1,\n        getNext: getNext$1,\n    };\n\n    let nextResponseCache = {};\n\n    function getGoogleVideoUrl(originalUrl) {\n        return Config.VIDEO_PROXY_SERVER_HOST + '/direct/' + btoa(originalUrl.toString());\n    }\n\n    function getPlayer(payload) {\n        // Also request the /next response if a later /next request is likely.\n        if (!nextResponseCache[payload.videoId] && !isMusic && !isEmbed) {\n            payload.includeNext = 1;\n        }\n\n        return sendRequest('getPlayer', payload);\n    }\n\n    function getNext(payload) {\n        // Next response already cached? => Return cached content\n        if (nextResponseCache[payload.videoId]) {\n            return nextResponseCache[payload.videoId];\n        }\n\n        return sendRequest('getNext', payload);\n    }\n\n    function sendRequest(endpoint, payload) {\n        const queryParams = new URLSearchParams(payload);\n        const proxyUrl = `${Config.ACCOUNT_PROXY_SERVER_HOST}/${endpoint}?${queryParams}&client=js`;\n\n        try {\n            const xmlhttp = new XMLHttpRequest();\n            xmlhttp.open('GET', proxyUrl, false);\n            xmlhttp.send(null);\n\n            const proxyResponse = nativeJSONParse(xmlhttp.responseText);\n\n            // Mark request as 'proxied'\n            proxyResponse.proxied = true;\n\n            // Put included /next response in the cache\n            if (proxyResponse.nextResponse) {\n                nextResponseCache[payload.videoId] = proxyResponse.nextResponse;\n                delete proxyResponse.nextResponse;\n            }\n\n            return proxyResponse;\n        } catch (err) {\n            error(err, 'Proxy API Error');\n            return { errorMessage: 'Proxy Connection failed' };\n        }\n    }\n\n    var proxy = {\n        getPlayer,\n        getNext,\n        getGoogleVideoUrl,\n    };\n\n    function getUnlockStrategies$1(videoId, lastPlayerUnlockReason) {\n        var _getYtcfgValue$client;\n        const clientName = getYtcfgValue('INNERTUBE_CLIENT_NAME') || 'WEB';\n        const clientVersion = getYtcfgValue('INNERTUBE_CLIENT_VERSION') || '2.20220203.04.00';\n        const hl = getYtcfgValue('HL');\n        const userInterfaceTheme = (_getYtcfgValue$client = getYtcfgValue('INNERTUBE_CONTEXT').client.userInterfaceTheme) !== null && _getYtcfgValue$client !== void 0\n            ? _getYtcfgValue$client\n            : document.documentElement.hasAttribute('dark')\n            ? 'USER_INTERFACE_THEME_DARK'\n            : 'USER_INTERFACE_THEME_LIGHT';\n\n        return [\n            /**\n             * Retrieve the sidebar and video description by just adding `racyCheckOk` and `contentCheckOk` params\n             * This strategy can be used to bypass content warnings\n             */\n            {\n                name: 'Content Warning Bypass',\n                skip: !lastPlayerUnlockReason || !lastPlayerUnlockReason.includes('CHECK_REQUIRED'),\n                optionalAuth: true,\n                payload: {\n                    context: {\n                        client: {\n                            clientName,\n                            clientVersion,\n                            hl,\n                            userInterfaceTheme,\n                        },\n                    },\n                    videoId,\n                    racyCheckOk: true,\n                    contentCheckOk: true,\n                },\n                endpoint: innertube,\n            },\n            /**\n             * Retrieve the sidebar and video description from an account proxy server.\n             * Session cookies of an age-verified Google account are stored on server side.\n             * See https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/tree/main/account-proxy\n             */\n            {\n                name: 'Account Proxy',\n                payload: {\n                    videoId,\n                    clientName,\n                    clientVersion,\n                    hl,\n                    userInterfaceTheme,\n                    isEmbed: +isEmbed,\n                    isConfirmed: +isConfirmed,\n                },\n                endpoint: proxy,\n            },\n        ];\n    }\n\n    function getUnlockStrategies(videoId, reason) {\n        const clientName = getYtcfgValue('INNERTUBE_CLIENT_NAME') || 'WEB';\n        const clientVersion = getYtcfgValue('INNERTUBE_CLIENT_VERSION') || '2.20220203.04.00';\n        const signatureTimestamp = getSignatureTimestamp();\n        const startTimeSecs = getCurrentVideoStartTime(videoId);\n        const hl = getYtcfgValue('HL');\n\n        return [\n            /**\n             * Retrieve the video info by just adding `racyCheckOk` and `contentCheckOk` params\n             * This strategy can be used to bypass content warnings\n             */\n            {\n                name: 'Content Warning Bypass',\n                skip: !reason || !reason.includes('CHECK_REQUIRED'),\n                optionalAuth: true,\n                payload: {\n                    context: {\n                        client: {\n                            clientName: clientName,\n                            clientVersion: clientVersion,\n                            hl,\n                        },\n                    },\n                    playbackContext: {\n                        contentPlaybackContext: {\n                            signatureTimestamp,\n                        },\n                    },\n                    videoId,\n                    startTimeSecs,\n                    racyCheckOk: true,\n                    contentCheckOk: true,\n                },\n                endpoint: innertube,\n            },\n            /**\n             * Retrieve the video info by using the TVHTML5 Embedded client\n             * This client has no age restrictions in place (2022-03-28)\n             * See https://github.com/zerodytrash/YouTube-Internal-Clients\n             */\n            {\n                name: 'TV Embedded Player',\n                requiresAuth: false,\n                payload: {\n                    context: {\n                        client: {\n                            clientName: 'TVHTML5_SIMPLY_EMBEDDED_PLAYER',\n                            clientVersion: '2.0',\n                            clientScreen: 'WATCH',\n                            hl,\n                        },\n                        thirdParty: {\n                            embedUrl: 'https://www.youtube.com/',\n                        },\n                    },\n                    playbackContext: {\n                        contentPlaybackContext: {\n                            signatureTimestamp,\n                        },\n                    },\n                    videoId,\n                    startTimeSecs,\n                    racyCheckOk: true,\n                    contentCheckOk: true,\n                },\n                endpoint: innertube,\n            },\n            /**\n             * Retrieve the video info by using the WEB_CREATOR client in combination with user authentication\n             * Requires that the user is logged in. Can bypass the tightened age verification in the EU.\n             * See https://github.com/yt-dlp/yt-dlp/pull/600\n             */\n            {\n                name: 'Creator + Auth',\n                requiresAuth: true,\n                payload: {\n                    context: {\n                        client: {\n                            clientName: 'WEB_CREATOR',\n                            clientVersion: '1.20210909.07.00',\n                            hl,\n                        },\n                    },\n                    playbackContext: {\n                        contentPlaybackContext: {\n                            signatureTimestamp,\n                        },\n                    },\n                    videoId,\n                    startTimeSecs,\n                    racyCheckOk: true,\n                    contentCheckOk: true,\n                },\n                endpoint: innertube,\n            },\n            /**\n             * Retrieve the video info from an account proxy server.\n             * Session cookies of an age-verified Google account are stored on server side.\n             * See https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/tree/main/account-proxy\n             */\n            {\n                name: 'Account Proxy',\n                payload: {\n                    videoId,\n                    reason,\n                    clientName,\n                    clientVersion,\n                    signatureTimestamp,\n                    startTimeSecs,\n                    hl,\n                    isEmbed: +isEmbed,\n                    isConfirmed: +isConfirmed,\n                },\n                endpoint: proxy,\n            },\n        ];\n    }\n\n    var buttonTemplate =\n        '<div style=\"margin-top: 15px !important; padding: 3px 10px 3px 10px; margin: 0px auto; background-color: #4d4d4d; width: fit-content; font-size: 1.2em; text-transform: uppercase; border-radius: 3px; cursor: pointer;\">\\n    <div class=\"button-text\"></div>\\n</div>';\n\n    let buttons = {};\n\n    async function addButton(id, text, backgroundColor, onClick) {\n        const errorScreenElement = await waitForElement('.ytp-error', 2000);\n        const buttonElement = createElement('div', { class: 'button-container', innerHTML: buttonTemplate });\n        buttonElement.getElementsByClassName('button-text')[0].innerText = text;\n\n        if (backgroundColor) {\n            buttonElement.querySelector(':scope > div').style['background-color'] = backgroundColor;\n        }\n\n        if (typeof onClick === 'function') {\n            buttonElement.addEventListener('click', onClick);\n        }\n\n        // Button already attached?\n        if (buttons[id] && buttons[id].isConnected) {\n            return;\n        }\n\n        buttons[id] = buttonElement;\n        errorScreenElement.append(buttonElement);\n    }\n\n    function removeButton(id) {\n        if (buttons[id] && buttons[id].isConnected) {\n            buttons[id].remove();\n        }\n    }\n\n    const confirmationButtonId = 'confirmButton';\n    const confirmationButtonText = 'Click to unlock';\n\n    function isConfirmationRequired() {\n        return !isConfirmed && isEmbed && Config.ENABLE_UNLOCK_CONFIRMATION_EMBED;\n    }\n\n    function requestConfirmation() {\n        addButton(confirmationButtonId, confirmationButtonText, null, () => {\n            removeButton(confirmationButtonId);\n            confirm();\n        });\n    }\n\n    function confirm() {\n        setUrlParams({\n            unlock_confirmed: 1,\n            autoplay: 1,\n        });\n    }\n\n    var tDesktop = '<tp-yt-paper-toast></tp-yt-paper-toast>\\n';\n\n    var tMobile =\n        '<c3-toast>\\n    <ytm-notification-action-renderer>\\n        <div class=\"notification-action-response-text\"></div>\\n    </ytm-notification-action-renderer>\\n</c3-toast>\\n';\n\n    const template = isDesktop ? tDesktop : tMobile;\n\n    const nToastContainer = createElement('div', { id: 'toast-container', innerHTML: template });\n    const nToast = nToastContainer.querySelector(':scope > *');\n\n    // On YT Music show the toast above the player controls\n    if (isMusic) {\n        nToast.style['margin-bottom'] = '85px';\n    }\n\n    if (!isDesktop) {\n        nToast.nMessage = nToast.querySelector('.notification-action-response-text');\n        nToast.show = (message) => {\n            nToast.nMessage.innerText = message;\n            nToast.setAttribute('dir', 'in');\n            setTimeout(() => {\n                nToast.setAttribute('dir', 'out');\n            }, nToast.duration + 225);\n        };\n    }\n\n    async function show(message, duration = 5) {\n        if (!Config.ENABLE_UNLOCK_NOTIFICATION) return;\n        if (isEmbed) return;\n\n        await pageLoaded();\n\n        // Do not show notification when tab is in background\n        if (document.visibilityState === 'hidden') return;\n\n        // Append toast container to DOM, if not already done\n        if (!nToastContainer.isConnected) document.documentElement.append(nToastContainer);\n\n        nToast.duration = duration * 1000;\n        nToast.show(message);\n    }\n\n    var Toast = { show };\n\n    const messagesMap = {\n        success: 'Age-restricted video successfully unlocked!',\n        fail: 'Unable to unlock this video 🙁 - More information in the developer console',\n    };\n\n    let lastPlayerUnlockVideoId = null;\n    let lastPlayerUnlockReason = null;\n\n    let lastProxiedGoogleVideoUrlParams;\n    let cachedPlayerResponse = {};\n\n    function getLastProxiedGoogleVideoId() {\n        var _lastProxiedGoogleVid;\n        return (_lastProxiedGoogleVid = lastProxiedGoogleVideoUrlParams) === null || _lastProxiedGoogleVid === void 0 ? void 0 : _lastProxiedGoogleVid.get('id');\n    }\n\n    function unlockResponse$1(playerResponse) {\n        var _playerResponse$video, _playerResponse$playa, _playerResponse$previ, _unlockedPlayerRespon, _unlockedPlayerRespon3;\n        // Check if the user has to confirm the unlock first\n        if (isConfirmationRequired()) {\n            info('Unlock confirmation required.');\n            requestConfirmation();\n            return;\n        }\n\n        const videoId = ((_playerResponse$video = playerResponse.videoDetails) === null || _playerResponse$video === void 0 ? void 0 : _playerResponse$video.videoId)\n            || getYtcfgValue('PLAYER_VARS').video_id;\n        const reason = ((_playerResponse$playa = playerResponse.playabilityStatus) === null || _playerResponse$playa === void 0 ? void 0 : _playerResponse$playa.status)\n            || ((_playerResponse$previ = playerResponse.previewPlayabilityStatus) === null || _playerResponse$previ === void 0 ? void 0 : _playerResponse$previ.status);\n\n        if (!Config.SKIP_CONTENT_WARNINGS && reason.includes('CHECK_REQUIRED')) {\n            info(`SKIP_CONTENT_WARNINGS disabled and ${reason} status detected.`);\n            return;\n        }\n\n        lastPlayerUnlockVideoId = videoId;\n        lastPlayerUnlockReason = reason;\n\n        const unlockedPlayerResponse = getUnlockedPlayerResponse(videoId, reason);\n\n        // account proxy error?\n        if (unlockedPlayerResponse.errorMessage) {\n            Toast.show(`${messagesMap.fail} (ProxyError)`, 10);\n            throw new Error(`Player Unlock Failed, Proxy Error Message: ${unlockedPlayerResponse.errorMessage}`);\n        }\n\n        // check if the unlocked response isn't playable\n        if (\n            !Config.VALID_PLAYABILITY_STATUSES.includes(\n                (_unlockedPlayerRespon = unlockedPlayerResponse.playabilityStatus) === null || _unlockedPlayerRespon === void 0 ? void 0 : _unlockedPlayerRespon.status,\n            )\n        ) {\n            var _unlockedPlayerRespon2;\n            Toast.show(`${messagesMap.fail} (PlayabilityError)`, 10);\n            throw new Error(\n                `Player Unlock Failed, playabilityStatus: ${\n                    (_unlockedPlayerRespon2 = unlockedPlayerResponse.playabilityStatus) === null || _unlockedPlayerRespon2 === void 0 ? void 0 : _unlockedPlayerRespon2.status\n                }`,\n            );\n        }\n\n        // if the video info was retrieved via proxy, store the URL params from the url-attribute to detect later if the requested video file (googlevideo.com) need a proxy.\n        if (\n            unlockedPlayerResponse.proxied && (_unlockedPlayerRespon3 = unlockedPlayerResponse.streamingData) !== null && _unlockedPlayerRespon3 !== void 0\n            && _unlockedPlayerRespon3.adaptiveFormats\n        ) {\n            var _unlockedPlayerRespon4, _unlockedPlayerRespon5;\n            const cipherText = (_unlockedPlayerRespon4 = unlockedPlayerResponse.streamingData.adaptiveFormats.find((x) =>\n                            x.signatureCipher\n                        )) === null || _unlockedPlayerRespon4 === void 0\n                ? void 0\n                : _unlockedPlayerRespon4.signatureCipher;\n            const videoUrl = cipherText\n                ? new URLSearchParams(cipherText).get('url')\n                : (_unlockedPlayerRespon5 = unlockedPlayerResponse.streamingData.adaptiveFormats.find((x) => x.url)) === null || _unlockedPlayerRespon5 === void 0\n                ? void 0\n                : _unlockedPlayerRespon5.url;\n\n            lastProxiedGoogleVideoUrlParams = videoUrl ? new URLSearchParams(new window.URL(videoUrl).search) : null;\n        }\n\n        // Overwrite the embedded (preview) playabilityStatus with the unlocked one\n        if (playerResponse.previewPlayabilityStatus) {\n            playerResponse.previewPlayabilityStatus = unlockedPlayerResponse.playabilityStatus;\n        }\n\n        // Transfer all unlocked properties to the original player response\n        Object.assign(playerResponse, unlockedPlayerResponse);\n\n        playerResponse.unlocked = true;\n\n        Toast.show(messagesMap.success);\n    }\n\n    function getUnlockedPlayerResponse(videoId, reason) {\n        // Check if response is cached\n        if (cachedPlayerResponse.videoId === videoId) return createDeepCopy(cachedPlayerResponse);\n\n        const unlockStrategies = getUnlockStrategies(videoId, reason);\n\n        let unlockedPlayerResponse = {};\n\n        // Try every strategy until one of them works\n        unlockStrategies.every((strategy, index) => {\n            var _unlockedPlayerRespon6;\n            // Skip strategy if authentication is required and the user is not logged in\n            if (strategy.skip || strategy.requiresAuth && !isUserLoggedIn()) return true;\n\n            info(`Trying Player Unlock Method #${index + 1} (${strategy.name})`);\n\n            try {\n                unlockedPlayerResponse = strategy.endpoint.getPlayer(strategy.payload, strategy.requiresAuth || strategy.optionalAuth);\n            } catch (err) {\n                error(err, `Player Unlock Method ${index + 1} failed with exception`);\n            }\n\n            const isStatusValid = Config.VALID_PLAYABILITY_STATUSES.includes(\n                (_unlockedPlayerRespon6 = unlockedPlayerResponse) === null || _unlockedPlayerRespon6 === void 0\n                    || (_unlockedPlayerRespon6 = _unlockedPlayerRespon6.playabilityStatus) === null || _unlockedPlayerRespon6 === void 0\n                    ? void 0\n                    : _unlockedPlayerRespon6.status,\n            );\n\n            if (isStatusValid) {\n                var _unlockedPlayerRespon7;\n                /**\n                 * Workaround: https://github.com/zerodytrash/Simple-YouTube-Age-Restriction-Bypass/issues/191\n                 *\n                 * YouTube checks if the `trackingParams` in the response matches the decoded `trackingParam` in `responseContext.mainAppWebResponseContext`.\n                 * However, sometimes the response does not include the `trackingParam` in the `responseContext`, causing the check to fail.\n                 *\n                 * This workaround addresses the issue by hardcoding the `trackingParams` in the response context.\n                 */\n                if (\n                    !unlockedPlayerResponse.trackingParams\n                    || !((_unlockedPlayerRespon7 = unlockedPlayerResponse.responseContext) !== null && _unlockedPlayerRespon7 !== void 0\n                        && (_unlockedPlayerRespon7 = _unlockedPlayerRespon7.mainAppWebResponseContext) !== null && _unlockedPlayerRespon7 !== void 0\n                        && _unlockedPlayerRespon7.trackingParam)\n                ) {\n                    unlockedPlayerResponse.trackingParams = 'CAAQu2kiEwjor8uHyOL_AhWOvd4KHavXCKw=';\n                    unlockedPlayerResponse.responseContext = {\n                        mainAppWebResponseContext: {\n                            trackingParam: 'kx_fmPxhoPZRzgL8kzOwANUdQh8ZwHTREkw2UqmBAwpBYrzRgkuMsNLBwOcCE59TDtslLKPQ-SS',\n                        },\n                    };\n                }\n\n                /**\n                 * Workaround: Account proxy response currently does not include `playerConfig`\n                 *\n                 * Stays here until we rewrite the account proxy to only include the necessary and bare minimum response\n                 */\n                if (strategy.payload.startTimeSecs && strategy.name === 'Account Proxy') {\n                    unlockedPlayerResponse.playerConfig = {\n                        playbackStartConfig: {\n                            startSeconds: strategy.payload.startTimeSecs,\n                        },\n                    };\n                }\n            }\n\n            return !isStatusValid;\n        });\n\n        // Cache response to prevent a flood of requests in case youtube processes a blocked response mutiple times.\n        cachedPlayerResponse = { videoId, ...createDeepCopy(unlockedPlayerResponse) };\n\n        return unlockedPlayerResponse;\n    }\n\n    let cachedNextResponse = {};\n\n    function unlockResponse(originalNextResponse) {\n        const videoId = originalNextResponse.currentVideoEndpoint.watchEndpoint.videoId;\n\n        if (!videoId) {\n            throw new Error(`Missing videoId in nextResponse`);\n        }\n\n        // Only unlock the /next response when the player has been unlocked as well\n        if (videoId !== lastPlayerUnlockVideoId) {\n            return;\n        }\n\n        const unlockedNextResponse = getUnlockedNextResponse(videoId);\n\n        // check if the sidebar of the unlocked response is still empty\n        if (isWatchNextSidebarEmpty(unlockedNextResponse)) {\n            throw new Error(`Sidebar Unlock Failed`);\n        }\n\n        // Transfer some parts of the unlocked response to the original response\n        mergeNextResponse(originalNextResponse, unlockedNextResponse);\n    }\n\n    function getUnlockedNextResponse(videoId) {\n        // Check if response is cached\n        if (cachedNextResponse.videoId === videoId) return createDeepCopy(cachedNextResponse);\n\n        const unlockStrategies = getUnlockStrategies$1(videoId, lastPlayerUnlockReason);\n\n        let unlockedNextResponse = {};\n\n        // Try every strategy until one of them works\n        unlockStrategies.every((strategy, index) => {\n            if (strategy.skip) return true;\n\n            info(`Trying Next Unlock Method #${index + 1} (${strategy.name})`);\n\n            try {\n                unlockedNextResponse = strategy.endpoint.getNext(strategy.payload, strategy.optionalAuth);\n            } catch (err) {\n                error(err, `Next Unlock Method ${index + 1} failed with exception`);\n            }\n\n            return isWatchNextSidebarEmpty(unlockedNextResponse);\n        });\n\n        // Cache response to prevent a flood of requests in case youtube processes a blocked response mutiple times.\n        cachedNextResponse = { videoId, ...createDeepCopy(unlockedNextResponse) };\n\n        return unlockedNextResponse;\n    }\n\n    function mergeNextResponse(originalNextResponse, unlockedNextResponse) {\n        var _unlockedNextResponse;\n        if (isDesktop) {\n            // Transfer WatchNextResults to original response\n            originalNextResponse.contents.twoColumnWatchNextResults.secondaryResults = unlockedNextResponse.contents.twoColumnWatchNextResults.secondaryResults;\n\n            // Transfer video description to original response\n            const originalVideoSecondaryInfoRenderer = originalNextResponse.contents.twoColumnWatchNextResults.results.results.contents.find(\n                (x) => x.videoSecondaryInfoRenderer,\n            ).videoSecondaryInfoRenderer;\n            const unlockedVideoSecondaryInfoRenderer = unlockedNextResponse.contents.twoColumnWatchNextResults.results.results.contents.find(\n                (x) => x.videoSecondaryInfoRenderer,\n            ).videoSecondaryInfoRenderer;\n\n            // TODO: Throw if description not found?\n            if (unlockedVideoSecondaryInfoRenderer.description) {\n                originalVideoSecondaryInfoRenderer.description = unlockedVideoSecondaryInfoRenderer.description;\n            } else if (unlockedVideoSecondaryInfoRenderer.attributedDescription) {\n                originalVideoSecondaryInfoRenderer.attributedDescription = unlockedVideoSecondaryInfoRenderer.attributedDescription;\n            }\n\n            return;\n        }\n\n        // Transfer WatchNextResults to original response\n        const unlockedWatchNextFeed = (_unlockedNextResponse = unlockedNextResponse.contents) === null || _unlockedNextResponse === void 0\n                || (_unlockedNextResponse = _unlockedNextResponse.singleColumnWatchNextResults) === null || _unlockedNextResponse === void 0\n                || (_unlockedNextResponse = _unlockedNextResponse.results) === null || _unlockedNextResponse === void 0\n                || (_unlockedNextResponse = _unlockedNextResponse.results) === null || _unlockedNextResponse === void 0\n                || (_unlockedNextResponse = _unlockedNextResponse.contents) === null || _unlockedNextResponse === void 0\n            ? void 0\n            : _unlockedNextResponse.find(\n                (x) => {\n                    var _x$itemSectionRendere;\n                    return ((_x$itemSectionRendere = x.itemSectionRenderer) === null || _x$itemSectionRendere === void 0 ? void 0 : _x$itemSectionRendere.targetId)\n                        === 'watch-next-feed';\n                },\n            );\n\n        if (unlockedWatchNextFeed) originalNextResponse.contents.singleColumnWatchNextResults.results.results.contents.push(unlockedWatchNextFeed);\n\n        // Transfer video description to original response\n        const originalStructuredDescriptionContentRenderer = originalNextResponse.engagementPanels\n            .find((x) => x.engagementPanelSectionListRenderer)\n            .engagementPanelSectionListRenderer.content.structuredDescriptionContentRenderer.items.find((x) => x.expandableVideoDescriptionBodyRenderer);\n        const unlockedStructuredDescriptionContentRenderer = unlockedNextResponse.engagementPanels\n            .find((x) => x.engagementPanelSectionListRenderer)\n            .engagementPanelSectionListRenderer.content.structuredDescriptionContentRenderer.items.find((x) => x.expandableVideoDescriptionBodyRenderer);\n\n        if (unlockedStructuredDescriptionContentRenderer.expandableVideoDescriptionBodyRenderer) {\n            originalStructuredDescriptionContentRenderer.expandableVideoDescriptionBodyRenderer =\n                unlockedStructuredDescriptionContentRenderer.expandableVideoDescriptionBodyRenderer;\n        }\n    }\n\n    /**\n     *  Handles XMLHttpRequests and\n     * - Rewrite Googlevideo URLs to Proxy URLs (if necessary)\n     * - Store auth headers for the authentication of further unlock requests.\n     * - Add \"content check ok\" flags to request bodys\n     */\n    function handleXhrOpen(method, url, xhr) {\n        let proxyUrl = unlockGoogleVideo(url);\n        if (proxyUrl) {\n            // Exclude credentials from XMLHttpRequest\n            Object.defineProperty(xhr, 'withCredentials', {\n                set: () => {},\n                get: () => false,\n            });\n            return proxyUrl;\n        }\n\n        if (url.pathname.indexOf('/youtubei/') === 0) {\n            // Store auth headers in storage for further usage.\n            attach$4(xhr, 'setRequestHeader', ([headerName, headerValue]) => {\n                if (Config.GOOGLE_AUTH_HEADER_NAMES.includes(headerName)) {\n                    set(headerName, headerValue);\n                }\n            });\n        }\n\n        if (Config.SKIP_CONTENT_WARNINGS && method === 'POST' && ['/youtubei/v1/player', '/youtubei/v1/next'].includes(url.pathname)) {\n            // Add content check flags to player and next request (this will skip content warnings)\n            attach$4(xhr, 'send', (args) => {\n                if (typeof args[0] === 'string') {\n                    args[0] = setContentCheckOk(args[0]);\n                }\n            });\n        }\n    }\n\n    /**\n     *  Handles Fetch requests and\n     * - Rewrite Googlevideo URLs to Proxy URLs (if necessary)\n     * - Store auth headers for the authentication of further unlock requests.\n     * - Add \"content check ok\" flags to request bodys\n     */\n    function handleFetchRequest(url, requestOptions) {\n        let newGoogleVideoUrl = unlockGoogleVideo(url);\n        if (newGoogleVideoUrl) {\n            // Exclude credentials from Fetch Request\n            if (requestOptions.credentials) {\n                requestOptions.credentials = 'omit';\n            }\n            return newGoogleVideoUrl;\n        }\n\n        if (url.pathname.indexOf('/youtubei/') === 0 && isObject(requestOptions.headers)) {\n            // Store auth headers in authStorage for further usage.\n            for (let headerName in requestOptions.headers) {\n                if (Config.GOOGLE_AUTH_HEADER_NAMES.includes(headerName)) {\n                    set(headerName, requestOptions.headers[headerName]);\n                }\n            }\n        }\n\n        if (Config.SKIP_CONTENT_WARNINGS && ['/youtubei/v1/player', '/youtubei/v1/next'].includes(url.pathname)) {\n            // Add content check flags to player and next request (this will skip content warnings)\n            requestOptions.body = setContentCheckOk(requestOptions.body);\n        }\n    }\n\n    /**\n     * If the account proxy was used to retrieve the video info, the following applies:\n     * some video files (mostly music videos) can only be accessed from IPs in the same country as the innertube api request (/youtubei/v1/player) was made.\n     * to get around this, the googlevideo URL will be replaced with a web-proxy URL in the same country (US).\n     * this is only required if the \"gcr=[countrycode]\" flag is set in the googlevideo-url...\n     * @returns The rewitten url (if a proxy is required)\n     */\n    function unlockGoogleVideo(url) {\n        if (Config.VIDEO_PROXY_SERVER_HOST && isGoogleVideoUrl(url)) {\n            if (isGoogleVideoUnlockRequired(url, getLastProxiedGoogleVideoId())) {\n                return proxy.getGoogleVideoUrl(url);\n            }\n        }\n    }\n\n    /**\n     * Adds `contentCheckOk` and `racyCheckOk` to the given json data (if the data contains a video id)\n     * @returns {string} The modified json\n     */\n    function setContentCheckOk(bodyJson) {\n        try {\n            let parsedBody = JSON.parse(bodyJson);\n            if (parsedBody.videoId) {\n                parsedBody.contentCheckOk = true;\n                parsedBody.racyCheckOk = true;\n                return JSON.stringify(parsedBody);\n            }\n        } catch {}\n        return bodyJson;\n    }\n\n    function processThumbnails(responseObject) {\n        const thumbnails = findNestedObjectsByAttributeNames(responseObject, ['url', 'height']);\n\n        let blurredThumbnailCount = 0;\n\n        for (const thumbnail of thumbnails) {\n            if (isThumbnailBlurred(thumbnail)) {\n                blurredThumbnailCount++;\n                thumbnail.url = thumbnail.url.split('?')[0];\n            }\n        }\n\n        info(blurredThumbnailCount + '/' + thumbnails.length + ' thumbnails detected as blurred.');\n    }\n\n    function isThumbnailBlurred(thumbnail) {\n        const hasSQPParam = thumbnail.url.indexOf('?sqp=') !== -1;\n\n        if (!hasSQPParam) {\n            return false;\n        }\n\n        const SQPLength = new URL(thumbnail.url).searchParams.get('sqp').length;\n        const isBlurred = Config.BLURRED_THUMBNAIL_SQP_LENGTHS.includes(SQPLength);\n\n        return isBlurred;\n    }\n\n    try {\n        attach$3(processYtData);\n        attach$2(processYtData);\n        attach(handleXhrOpen);\n        attach$1(handleFetchRequest);\n    } catch (err) {\n        error(err, 'Error while attaching data interceptors');\n    }\n\n    function processYtData(ytData) {\n        try {\n            // Player Unlock #1: Initial page data structure and response from `/youtubei/v1/player` XHR request\n            if (isPlayerObject(ytData) && isAgeRestricted(ytData.playabilityStatus)) {\n                unlockResponse$1(ytData);\n            } // Player Unlock #2: Embedded Player inital data structure\n            else if (isEmbeddedPlayerObject(ytData) && isAgeRestricted(ytData.previewPlayabilityStatus)) {\n                unlockResponse$1(ytData);\n            }\n        } catch (err) {\n            error(err, 'Video unlock failed');\n        }\n\n        try {\n            // Unlock sidebar watch next feed (sidebar) and video description\n            if (isWatchNextObject(ytData) && isWatchNextSidebarEmpty(ytData)) {\n                unlockResponse(ytData);\n            }\n\n            // Mobile version\n            if (isWatchNextObject(ytData.response) && isWatchNextSidebarEmpty(ytData.response)) {\n                unlockResponse(ytData.response);\n            }\n        } catch (err) {\n            error(err, 'Sidebar unlock failed');\n        }\n\n        try {\n            // Unlock blurry video thumbnails in search results\n            if (isSearchResult(ytData)) {\n                processThumbnails(ytData);\n            }\n        } catch (err) {\n            error(err, 'Thumbnail unlock failed');\n        }\n\n        return ytData;\n    }\n})();\n",
    "css": ""
  },
  "_TwitchNoSub": {
    "name": "TwitchNoSub",
    "author": "besuper",
    "description": "Watch sub only VODs on Twitch",
    "version": "1.0.0",
    "updateURL": "https://raw.githubusercontent.com/besuper/TwitchNoSub/master/userscript/twitchnosub.user.js",
    "metaURL": "",
    "preprocessor": "",
    "injectInto": "page",
    "runAt": "document_start",
    "allFrames": false,
    "matchAboutBlank": false,
    "antifeatures": [],
    "container": [],
    "excludes": [],
    "includes": [],
    "require": [],
    "resource": {},
    "matches": [
      "*://*.twitch.tv/videos/*"
    ],
    "excludeMatches": [],
    "includeGlobs": [],
    "excludeGlobs": [],
    "grant": [
      "none"
    ],
    "i18n": {
      "name": {},
      "description": {}
    },
    "storage": {},
    "userMeta": "",
    "userVar": {},
    "autoUpdate": false,
    "enabled": true,
    "error": "",
    "requireRemote": [],
    "style": [],
    "js": "// ==UserScript==\n// @name         TwitchNoSub\n// @namespace    https://github.com/besuper/TwitchNoSub\n// @version      1.0.0\n// @description  Watch sub only VODs on Twitch\n// @author       besuper\n// @match        *://*.twitch.tv/videos/*\n// @updateURL    https://raw.githubusercontent.com/besuper/TwitchNoSub/master/userscript/twitchnosub.user.js\n// @downloadURL  https://raw.githubusercontent.com/besuper/TwitchNoSub/master/userscript/twitchnosub.user.js\n// @icon         https://raw.githubusercontent.com/besuper/TwitchNoSub/master/assets/icons/icon.png\n// @run-at       document-start\n// @inject-into  page\n// @grant        none\n// ==/UserScript==\n\n(function () {\n    'use strict';\n\n    const oldWorker = window.Worker;\n\n    window.Worker = class Worker extends oldWorker {\n        constructor() {\n            super(URL.createObjectURL(new Blob([\"importScripts('https://cdn.jsdelivr.net/gh/besuper/TwitchNoSub/src/patch_amazonworker.js', 'https://cdn.jsdelivr.net/npm/amazon-ivs-player/dist/assets/amazon-ivs-worker.min.js');\"])));\n        }\n    }\n})();",
    "css": ""
  },
  "_YouTube Disable Normalization": {
    "name": "YouTube Disable Normalization",
    "author": "Wouter Gerarts",
    "description": "Allows true 100% volume on youtube videos.",
    "version": "0.2",
    "updateURL": "https://gist.githubusercontent.com/fa7ad/fa995474f5cb9fe91fb209686881373d/raw/9e7670eb4c7b91e7282d408acea1b3a9db3df2f3/yt-loudness.user.js",
    "metaURL": "",
    "preprocessor": "",
    "injectInto": "",
    "runAt": "document_idle",
    "allFrames": false,
    "matchAboutBlank": false,
    "antifeatures": [],
    "container": [],
    "excludes": [],
    "includes": [],
    "require": [],
    "resource": {},
    "matches": [
      "https://www.youtube.com/*",
      "https://youtube.com/*"
    ],
    "excludeMatches": [],
    "includeGlobs": [],
    "excludeGlobs": [],
    "grant": [
      "none"
    ],
    "i18n": {
      "name": {},
      "description": {}
    },
    "storage": {},
    "userMeta": "",
    "userVar": {},
    "autoUpdate": true,
    "enabled": true,
    "error": "",
    "requireRemote": [],
    "style": [],
    "js": "// ==UserScript==\n// @name         YouTube Disable Normalization\n// @namespace    https://gist.github.com/fa7ad/fa995474f5cb9fe91fb209686881373d\n// @version      0.2\n// @description  Allows true 100% volume on youtube videos.\n// @author       Wouter Gerarts\n// @match        https://www.youtube.com/*\n// @match        https://youtube.com/*\n// @grant        none\n// ==/UserScript==\n\n(function () {\n  \"use strict\";\n\n  function baseElement() {\n    return document.querySelector(\"#content\");\n  }\n\n  if (typeof fullVolumeButtonTaskId === \"number\") {\n    console.log(\"clearing interval\");\n    clearInterval(fullVolumeButtonTaskId);\n  }\n  function maxVol() {\n    var videos = document.querySelectorAll(\"video\");\n    videos.forEach(function (video) {\n      video.volume = 1;\n      console.log(video, video.volume);\n    });\n  }\n  function createFullVolumeButton() {\n    var css = `\n        .full-volume-addon-button {\n          margin: 0 0.5em;\n          padding: 0.25em 1em;\n          background: transparent;\n          color: #fff;\n          border: 1px solid #fff;\n          border-radius: 1em;\n          font: caption;\n        }\n        .full-volume-addon-button:hover {\n          cursor: pointer;\n          background: #fff;\n          color: #000;\n        }\n        `;\n    var style = document.createElement(\"style\");\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n    document.querySelector(\"head\").appendChild(style);\n\n    var el = document.createElement(\"button\");\n    el.textContent = \"100% Volume\";\n    el.classList.add(\"full-volume-addon-button\");\n    el.onclick = function (e) {\n      e.preventDefault();\n      maxVol();\n    };\n    return el;\n  }\n\n  function round(num, sig) {\n    var mult = Math.pow(10, sig);\n    return Math.round(num * mult) / mult;\n  }\n\n  var fullVolumeButtonTaskId = setInterval(function () {\n    if (baseElement().querySelector(\"video\") === undefined) {\n      console.log(\"video element not found\");\n      return;\n    }\n    var volTimer = setInterval(function () {\n      if (\n        [].every.call(document.querySelectorAll(\"video\"), function (vid) {\n          return vid.volume === 1;\n        })\n      ) {\n        console.log(\"vol maxed out\");\n        clearInterval(volTimer);\n        return;\n      } else {\n        maxVol();\n      }\n    }, 500);\n    if (baseElement().querySelector(\".full-volume-addon-button\") != undefined) {\n      console.log(\"full volume addon button already found\");\n      clearInterval(fullVolumeButtonTaskId);\n      clearInterval(volTimer);\n      return;\n    }\n\n    var video = baseElement().querySelector(\"video\");\n\n    var videoTitleElement = baseElement().querySelector(\"#title h1\");\n    videoTitleElement.appendChild(createFullVolumeButton());\n  }, 500);\n})();\n",
    "css": ""
  }
}